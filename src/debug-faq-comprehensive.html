<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAQ Á∑èÂêàË®∫Êñ≠„ÉÑ„Éº„É´</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; padding: 20px; background: #0f172a; color: #e2e8f0; }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { font-size: 2rem; margin-bottom: 2rem; color: #38bdf8; }
        .test-section { background: #1e293b; border-radius: 8px; padding: 20px; margin-bottom: 20px; border-left: 4px solid #475569; }
        .test-section.running { border-left-color: #fbbf24; }
        .test-section.success { border-left-color: #10b981; }
        .test-section.error { border-left-color: #ef4444; }
        .test-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .test-title { font-size: 1.25rem; font-weight: 600; }
        .status { padding: 4px 12px; border-radius: 4px; font-size: 0.875rem; font-weight: 500; }
        .status.pending { background: #475569; }
        .status.running { background: #fbbf24; color: #000; }
        .status.success { background: #10b981; }
        .status.error { background: #ef4444; }
        .test-result { background: #0f172a; padding: 15px; border-radius: 6px; margin-top: 10px; }
        .log-line { padding: 4px 0; font-family: 'Consolas', monospace; font-size: 0.875rem; }
        .log-success { color: #10b981; }
        .log-error { color: #ef4444; }
        .log-warning { color: #fbbf24; }
        .log-info { color: #38bdf8; }
        pre { background: #000; padding: 12px; border-radius: 4px; overflow-x: auto; font-size: 0.875rem; color: #a5f3fc; }
        button { background: #3b82f6; color: white; padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer; font-size: 1rem; font-weight: 500; }
        button:hover { background: #2563eb; }
        button:disabled { background: #475569; cursor: not-allowed; }
        .summary { background: #1e293b; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px; }
        .summary-item { background: #0f172a; padding: 15px; border-radius: 6px; text-align: center; }
        .summary-value { font-size: 2rem; font-weight: bold; margin-bottom: 5px; }
        .summary-label { color: #94a3b8; font-size: 0.875rem; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç FAQ Á∑èÂêàË®∫Êñ≠„ÉÑ„Éº„É´</h1>

        <div class="summary" id="summary">
            <h2 style="margin-bottom: 15px;">Ë®∫Êñ≠„Çµ„Éû„É™„Éº</h2>
            <div class="summary-grid">
                <div class="summary-item">
                    <div class="summary-value" id="total-tests">0</div>
                    <div class="summary-label">Á∑è„ÉÜ„Çπ„ÉàÊï∞</div>
                </div>
                <div class="summary-item">
                    <div class="summary-value" style="color: #10b981;" id="passed-tests">0</div>
                    <div class="summary-label">ÊàêÂäü</div>
                </div>
                <div class="summary-item">
                    <div class="summary-value" style="color: #ef4444;" id="failed-tests">0</div>
                    <div class="summary-label">Â§±Êïó</div>
                </div>
                <div class="summary-item">
                    <div class="summary-value" style="color: #fbbf24;" id="warning-tests">0</div>
                    <div class="summary-label">Ë≠¶Âëä</div>
                </div>
            </div>
        </div>

        <button onclick="runAllTests()" id="run-btn">ÂÖ®„ÉÜ„Çπ„ÉàÂÆüË°å</button>

        <div style="margin-top: 20px;" id="tests-container"></div>
    </div>

    <script>
        const SUPABASE_URL = 'https://hegpxvyziovlfxdfsrsv.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhlZ3B4dnl6aW92bGZ4ZGZzcnN2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2Nzk5MjYsImV4cCI6MjA3NjI1NTkyNn0.uLCJvgKDOWpTxRjt39DVyqUotQcSam3v4lItofWeDws';

        let supabase;
        const tests = [];
        let stats = { total: 0, passed: 0, failed: 0, warnings: 0 };

        class DiagnosticTest {
            constructor(id, title, description, testFn) {
                this.id = id;
                this.title = title;
                this.description = description;
                this.testFn = testFn;
                this.status = 'pending';
                this.logs = [];
                tests.push(this);
            }

            log(message, type = 'info') {
                this.logs.push({ message, type, timestamp: new Date().toISOString() });
                this.render();
            }

            async run() {
                this.status = 'running';
                this.logs = [];
                this.render();

                try {
                    await this.testFn(this);
                    if (this.status === 'running') {
                        this.status = 'success';
                        stats.passed++;
                    }
                } catch (error) {
                    this.status = 'error';
                    this.log(`„Ç®„É©„Éº: ${error.message}`, 'error');
                    stats.failed++;
                }

                this.render();
                updateSummary();
            }

            render() {
                let section = document.getElementById(`test-${this.id}`);
                if (!section) {
                    section = document.createElement('div');
                    section.id = `test-${this.id}`;
                    section.className = 'test-section';
                    document.getElementById('tests-container').appendChild(section);
                }

                section.className = `test-section ${this.status}`;

                const statusText = {
                    pending: 'ÂæÖÊ©ü‰∏≠',
                    running: 'ÂÆüË°å‰∏≠...',
                    success: '‚úÖ ÊàêÂäü',
                    error: '‚ùå Â§±Êïó',
                    warning: '‚ö†Ô∏è Ë≠¶Âëä'
                };

                section.innerHTML = `
                    <div class="test-header">
                        <div class="test-title">${this.title}</div>
                        <div class="status ${this.status}">${statusText[this.status]}</div>
                    </div>
                    <div style="color: #94a3b8; margin-bottom: 10px;">${this.description}</div>
                    ${this.logs.length > 0 ? `
                        <div class="test-result">
                            ${this.logs.map(log => `
                                <div class="log-line log-${log.type}">${log.message}</div>
                            `).join('')}
                        </div>
                    ` : ''}
                `;
            }
        }

        // „ÉÜ„Çπ„Éà1: Supabase CDNË™≠„ÅøËæº„Åø
        new DiagnosticTest('cdn', 'Supabase CDNË™≠„ÅøËæº„ÅøÁ¢∫Ë™ç',
            'Supabase JavaScript SDK„ÅåÊ≠£„Åó„ÅèË™≠„ÅøËæº„Åæ„Çå„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™ç',
            async (test) => {
                test.log('window.supabase „ÅÆÂ≠òÂú®„ÇíÁ¢∫Ë™ç‰∏≠...');
                if (!window.supabase) {
                    throw new Error('window.supabase „Åå undefined „Åß„Åô');
                }
                test.log('‚úì window.supabase „ÅåÂ≠òÂú®„Åó„Åæ„Åô', 'success');

                test.log('createClient „É°„ÇΩ„ÉÉ„Éâ„ÅÆÂ≠òÂú®„ÇíÁ¢∫Ë™ç‰∏≠...');
                if (typeof window.supabase.createClient !== 'function') {
                    throw new Error('window.supabase.createClient „ÅåÈñ¢Êï∞„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì');
                }
                test.log('‚úì createClient „É°„ÇΩ„ÉÉ„Éâ„ÅåÂ≠òÂú®„Åó„Åæ„Åô', 'success');
            }
        );

        // „ÉÜ„Çπ„Éà2: SupabaseÊé•Á∂öÊÉÖÂ†±
        new DiagnosticTest('credentials', 'SupabaseÊé•Á∂öÊÉÖÂ†±Á¢∫Ë™ç',
            'URL„Å®Key„ÅåÊ≠£„Åó„ÅèË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™ç',
            async (test) => {
                test.log(`URL: ${SUPABASE_URL}`);
                test.log(`Key (ÊúÄÂàù„ÅÆ30ÊñáÂ≠ó): ${SUPABASE_KEY.substring(0, 30)}...`);

                if (!SUPABASE_URL) throw new Error('URL„ÅåÊú™Ë®≠ÂÆö„Åß„Åô');
                if (!SUPABASE_KEY) throw new Error('Key„ÅåÊú™Ë®≠ÂÆö„Åß„Åô');

                test.log('‚úì Êé•Á∂öÊÉÖÂ†±„ÅåË®≠ÂÆö„Åï„Çå„Å¶„ÅÑ„Åæ„Åô', 'success');
            }
        );

        // „ÉÜ„Çπ„Éà3: Supabase„ÇØ„É©„Ç§„Ç¢„É≥„ÉàÂàùÊúüÂåñ
        new DiagnosticTest('client-init', 'Supabase„ÇØ„É©„Ç§„Ç¢„É≥„ÉàÂàùÊúüÂåñ',
            'createClient()„Çí‰Ωø„Å£„Å¶„ÇØ„É©„Ç§„Ç¢„É≥„Éà„ÇíÊ≠£„Åó„ÅèÂàùÊúüÂåñ',
            async (test) => {
                test.log('„ÇØ„É©„Ç§„Ç¢„É≥„Éà„ÇíÂàùÊúüÂåñ‰∏≠...');
                supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

                test.log('„ÇØ„É©„Ç§„Ç¢„É≥„Éà„Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„ÇíÁ¢∫Ë™ç‰∏≠...');
                if (!supabase) throw new Error('„ÇØ„É©„Ç§„Ç¢„É≥„ÉàÂàùÊúüÂåñ„Å´Â§±Êïó');
                if (!supabase.from) throw new Error('supabase.from „ÅåÂ≠òÂú®„Åó„Åæ„Åõ„Çì');
                if (!supabase.auth) throw new Error('supabase.auth „ÅåÂ≠òÂú®„Åó„Åæ„Åõ„Çì');

                test.log('‚úì „ÇØ„É©„Ç§„Ç¢„É≥„Éà„ÅåÊ≠£„Åó„ÅèÂàùÊúüÂåñ„Åï„Çå„Åæ„Åó„Åü', 'success');
                test.log(`  - from: ${typeof supabase.from}`);
                test.log(`  - auth: ${typeof supabase.auth}`);
            }
        );

        // „ÉÜ„Çπ„Éà4: „ÉÜ„Éº„Éñ„É´Â≠òÂú®Á¢∫Ë™ç
        new DiagnosticTest('tables', '„ÉÜ„Éº„Éñ„É´Â≠òÂú®Á¢∫Ë™ç',
            'faq_categories„Å®faqs„ÉÜ„Éº„Éñ„É´„ÅåÂ≠òÂú®„Åô„Çã„ÅãÁ¢∫Ë™ç',
            async (test) => {
                test.log('faq_categories „ÉÜ„Éº„Éñ„É´„ÇíÁ¢∫Ë™ç‰∏≠...');
                const { error: catError } = await supabase
                    .from('faq_categories')
                    .select('count');

                if (catError) {
                    test.log(`‚ùå faq_categories: ${catError.message}`, 'error');
                    throw catError;
                }
                test.log('‚úì faq_categories „ÉÜ„Éº„Éñ„É´„ÅåÂ≠òÂú®„Åó„Åæ„Åô', 'success');

                test.log('faqs „ÉÜ„Éº„Éñ„É´„ÇíÁ¢∫Ë™ç‰∏≠...');
                const { error: faqError } = await supabase
                    .from('faqs')
                    .select('count');

                if (faqError) {
                    test.log(`‚ùå faqs: ${faqError.message}`, 'error');
                    throw faqError;
                }
                test.log('‚úì faqs „ÉÜ„Éº„Éñ„É´„ÅåÂ≠òÂú®„Åó„Åæ„Åô', 'success');
            }
        );

        // „ÉÜ„Çπ„Éà5: „Éá„Éº„ÇøÂèñÂæó„ÉÜ„Çπ„Éà
        new DiagnosticTest('data-fetch', '„Éá„Éº„ÇøÂèñÂæó„ÉÜ„Çπ„Éà',
            'ÂÆüÈöõ„Å´„Éá„Éº„Çø„Éô„Éº„Çπ„Åã„Çâ„Éá„Éº„Çø„ÇíÂèñÂæó„Åß„Åç„Çã„ÅãÁ¢∫Ë™ç',
            async (test) => {
                test.log('FAQ „Ç´„ÉÜ„Ç¥„É™„ÇíÂèñÂæó‰∏≠...');
                const { data: categories, error: catError } = await supabase
                    .from('faq_categories')
                    .select('*')
                    .order('display_order');

                if (catError) {
                    test.log(`‚ùå „Ç´„ÉÜ„Ç¥„É™ÂèñÂæó„Ç®„É©„Éº: ${catError.message}`, 'error');
                    throw catError;
                }

                test.log(`‚úì „Ç´„ÉÜ„Ç¥„É™Êï∞: ${categories?.length || 0}`, 'success');
                if (categories && categories.length > 0) {
                    test.log('„Ç´„ÉÜ„Ç¥„É™‰∏ÄË¶ß:');
                    categories.forEach(cat => {
                        test.log(`  - ${cat.name} (ID: ${cat.id}, Order: ${cat.display_order})`);
                    });
                } else {
                    test.status = 'warning';
                    stats.warnings++;
                    test.log('‚ö†Ô∏è „Ç´„ÉÜ„Ç¥„É™„Åå0‰ª∂„Åß„Åô', 'warning');
                }

                test.log('FAQ „Ç¢„Ç§„ÉÜ„É†„ÇíÂèñÂæó‰∏≠...');
                const { data: faqs, error: faqError } = await supabase
                    .from('faqs')
                    .select('*, faq_categories(name)')
                    .order('display_order');

                if (faqError) {
                    test.log(`‚ùå FAQÂèñÂæó„Ç®„É©„Éº: ${faqError.message}`, 'error');
                    throw faqError;
                }

                test.log(`‚úì FAQÊï∞: ${faqs?.length || 0}`, 'success');
                if (faqs && faqs.length > 0) {
                    test.log('FAQ‰∏ÄË¶ßÔºàÊúÄÂ§ß5‰ª∂Ôºâ:');
                    faqs.slice(0, 5).forEach(faq => {
                        test.log(`  - "${faq.question?.substring(0, 50)}..." („Ç´„ÉÜ„Ç¥„É™: ${faq.faq_categories?.name || 'N/A'})`);
                    });
                } else {
                    if (categories && categories.length > 0) {
                        test.status = 'warning';
                        stats.warnings++;
                        test.log('‚ö†Ô∏è FAQ„Åå0‰ª∂„Åß„ÅôÔºà„Ç´„ÉÜ„Ç¥„É™„ÅØÂ≠òÂú®Ôºâ', 'warning');
                    }
                }
            }
        );

        // „ÉÜ„Çπ„Éà6: RLS„Éù„É™„Ç∑„ÉºÁ¢∫Ë™ç
        new DiagnosticTest('rls', 'RLS„Éù„É™„Ç∑„ÉºÁ¢∫Ë™ç',
            'ÂåøÂêç„É¶„Éº„Ç∂„Éº„Åß„ÅÆË™≠„ÅøÂèñ„ÇäÊ®©Èôê„ÇíÁ¢∫Ë™ç',
            async (test) => {
                test.log('ÂåøÂêç„Åß„ÅÆ faq_categories Ë™≠„ÅøÂèñ„Çä„ÉÜ„Çπ„Éà...');
                const { data, error } = await supabase
                    .from('faq_categories')
                    .select('id')
                    .limit(1);

                if (error) {
                    if (error.code === '42501' || error.message.includes('permission')) {
                        test.status = 'error';
                        test.log('‚ùå RLS„Éù„É™„Ç∑„Éº„Å´„Çà„ÇäË™≠„ÅøÂèñ„Çä„Åå„Éñ„É≠„ÉÉ„ÇØ„Åï„Çå„Å¶„ÅÑ„Åæ„Åô', 'error');
                        test.log('ÂØæÂá¶ÊñπÊ≥ï: Supabase Dashboard„Åß‰ª•‰∏ã„ÅÆ„Éù„É™„Ç∑„Éº„ÇíËøΩÂä†:', 'warning');
                        test.log('  1. faq_categories: SELECT „ÇíÂÖ®Âì°„Å´Ë®±ÂèØ', 'warning');
                        test.log('  2. faqs: SELECT „ÇíÂÖ®Âì°„Å´Ë®±ÂèØ', 'warning');
                        throw error;
                    }
                    throw error;
                }

                test.log('‚úì ÂåøÂêç„É¶„Éº„Ç∂„Éº„ÅßË™≠„ÅøÂèñ„ÇäÂèØËÉΩ„Åß„Åô', 'success');
            }
        );

        // „ÉÜ„Çπ„Éà7: common.jsÁµ±ÂêàÁ¢∫Ë™ç
        new DiagnosticTest('commonjs', 'common.js Áµ±ÂêàÁ¢∫Ë™ç',
            'common.js„ÅßFAQ API„ÅåÊ≠£„Åó„ÅèÂàùÊúüÂåñ„Åï„Çå„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™ç',
            async (test) => {
                test.log('window.supabaseClient „ÅÆÂ≠òÂú®Á¢∫Ë™ç...');
                if (window.supabaseClient) {
                    test.log('‚úì window.supabaseClient „ÅåÂ≠òÂú®„Åó„Åæ„Åô', 'success');
                } else {
                    test.log('‚ö†Ô∏è window.supabaseClient „ÅåÂ≠òÂú®„Åó„Åæ„Åõ„Çì', 'warning');
                }

                test.log('window.supabaseAPI „ÅÆÂ≠òÂú®Á¢∫Ë™ç...');
                if (!window.supabaseAPI) {
                    test.log('‚ö†Ô∏è window.supabaseAPI „ÅåÂ≠òÂú®„Åó„Åæ„Åõ„Çì', 'warning');
                    test.log('common.js„Åå„Åæ„Å†ÂÆüË°å„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô', 'warning');
                    test.status = 'warning';
                    stats.warnings++;
                    return;
                }
                test.log('‚úì window.supabaseAPI „ÅåÂ≠òÂú®„Åó„Åæ„Åô', 'success');

                test.log('window.supabaseAPI.faq „ÅÆÂ≠òÂú®Á¢∫Ë™ç...');
                if (!window.supabaseAPI.faq) {
                    test.log('‚ùå window.supabaseAPI.faq „ÅåÂ≠òÂú®„Åó„Åæ„Åõ„Çì', 'error');
                    throw new Error('FAQ API„ÅåÂàùÊúüÂåñ„Åï„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì');
                }
                test.log('‚úì window.supabaseAPI.faq „ÅåÂ≠òÂú®„Åó„Åæ„Åô', 'success');

                const methods = ['getCategories', 'getItems', 'create', 'update', 'delete'];
                test.log('API„É°„ÇΩ„ÉÉ„Éâ„ÅÆÁ¢∫Ë™ç...');
                for (const method of methods) {
                    if (typeof window.supabaseAPI.faq[method] === 'function') {
                        test.log(`  ‚úì ${method}`, 'success');
                    } else {
                        test.log(`  ‚ùå ${method} „ÅåÂ≠òÂú®„Åó„Åæ„Åõ„Çì`, 'error');
                        throw new Error(`${method} „É°„ÇΩ„ÉÉ„Éâ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì`);
                    }
                }
            }
        );

        // „ÉÜ„Çπ„Éà8: „ÉÜ„Éº„Éñ„É´ÊßãÈÄ†Á¢∫Ë™ç
        new DiagnosticTest('schema', '„ÉÜ„Éº„Éñ„É´ÊßãÈÄ†Á¢∫Ë™ç',
            '„ÉÜ„Éº„Éñ„É´„ÅÆ„Ç´„É©„É†ÊßãÈÄ†„ÅåÊ≠£„Åó„ÅÑ„ÅãÁ¢∫Ë™ç',
            async (test) => {
                test.log('faq_categories „ÅÆ„Çµ„É≥„Éó„É´„É¨„Ç≥„Éº„Éâ„ÇíÂèñÂæó...');
                const { data: catSample } = await supabase
                    .from('faq_categories')
                    .select('*')
                    .limit(1)
                    .single();

                if (catSample) {
                    test.log('faq_categories „ÅÆ„Ç´„É©„É†:');
                    test.log(`  ${Object.keys(catSample).join(', ')}`);
                } else {
                    test.log('‚ö†Ô∏è „Ç´„ÉÜ„Ç¥„É™„ÅÆ„Çµ„É≥„Éó„É´„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì', 'warning');
                }

                test.log('faqs „ÅÆ„Çµ„É≥„Éó„É´„É¨„Ç≥„Éº„Éâ„ÇíÂèñÂæó...');
                const { data: faqSample } = await supabase
                    .from('faqs')
                    .select('*')
                    .limit(1)
                    .single();

                if (faqSample) {
                    test.log('faqs „ÅÆ„Ç´„É©„É†:');
                    test.log(`  ${Object.keys(faqSample).join(', ')}`);

                    // ÂøÖÈ†à„Ç´„É©„É†„ÅÆ„ÉÅ„Çß„ÉÉ„ÇØ
                    const required = ['id', 'question', 'answer', 'category_id'];
                    const missing = required.filter(col => !(col in faqSample));
                    if (missing.length > 0) {
                        test.log(`‚ùå ÂøÖÈ†à„Ç´„É©„É†„Åå‰∏çË∂≥: ${missing.join(', ')}`, 'error');
                        throw new Error('„ÉÜ„Éº„Éñ„É´ÊßãÈÄ†„Åå‰∏çÊ≠£„Åß„Åô');
                    }
                    test.log('‚úì ÂøÖÈ†à„Ç´„É©„É†„ÅåÂÖ®„Å¶Â≠òÂú®„Åó„Åæ„Åô', 'success');
                } else {
                    test.log('‚ö†Ô∏è FAQ„ÅÆ„Çµ„É≥„Éó„É´„Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì', 'warning');
                }
            }
        );

        async function runAllTests() {
            const btn = document.getElementById('run-btn');
            btn.disabled = true;
            btn.textContent = 'ÂÆüË°å‰∏≠...';

            stats = { total: tests.length, passed: 0, failed: 0, warnings: 0 };
            updateSummary();

            for (const test of tests) {
                test.render();
                await test.run();
                await new Promise(resolve => setTimeout(resolve, 300));
            }

            btn.disabled = false;
            btn.textContent = 'ÂÜçÂÆüË°å';

            // ÊúÄÁµÇ„Çµ„Éû„É™„Éº
            const allPassed = stats.failed === 0 && stats.warnings === 0;
            if (allPassed) {
                alert('‚úÖ ÂÖ®„ÉÜ„Çπ„ÉàÊàêÂäüÔºÅ\n\nSupabase„Å®„ÅÆÊé•Á∂ö„Éª„Éá„Éº„ÇøÂèñÂæó„Å´ÂïèÈ°å„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ\nadmin-faq.html„ÅßÂïèÈ°å„ÅåÁô∫Áîü„Åó„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅØ„ÄÅ„Éñ„É©„Ç¶„Ç∂„Ç≠„É£„ÉÉ„Ç∑„É•„Çí„ÇØ„É™„Ç¢„Åó„Å¶ÂÜçÂ∫¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ„ÄÇ');
            } else if (stats.failed > 0) {
                alert(`‚ùå ${stats.failed}‰ª∂„ÅÆ„ÉÜ„Çπ„Éà„ÅåÂ§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ\n\nÂ§±Êïó„Åó„ÅüÈ†ÖÁõÆ„ÇíÁ¢∫Ë™ç„Åó„Å¶‰øÆÊ≠£„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ`);
            } else {
                alert(`‚ö†Ô∏è ${stats.warnings}‰ª∂„ÅÆË≠¶Âëä„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ\n\n„Éá„Éº„Çø„ÅåÁôªÈå≤„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ`);
            }
        }

        function updateSummary() {
            document.getElementById('total-tests').textContent = stats.total;
            document.getElementById('passed-tests').textContent = stats.passed;
            document.getElementById('failed-tests').textContent = stats.failed;
            document.getElementById('warning-tests').textContent = stats.warnings;
        }

        // ÂàùÊúüÂåñ
        updateSummary();
        tests.forEach(test => test.render());
    </script>
</body>
</html>
