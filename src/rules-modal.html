<!DOCTYPE html>
<html lang="ja" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ルール・ガイドライン | LIFE X 加盟店専用サイト</title>
    <!-- Tailwind CSS (Production Build) -->
    <link rel="stylesheet" href="/assets/tailwind.css">

    <link href="./styles/main.css" rel="stylesheet">
    <script src="/js/common.js"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body class="h-full bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="/" class="text-xl font-bold text-gray-900 hover:text-gray-700">LIFE X</a>
                    <span class="ml-2 px-2 py-1 bg-primary-100 text-primary-800 text-xs rounded-full">加盟店専用</span>
                </div>
                <nav class="hidden md:flex space-x-8">
                    <a href="/" class="text-gray-600 hover:text-gray-900 text-sm">ホーム</a>
                    <a href="/matrix.html" class="text-gray-600 hover:text-gray-900 text-sm">間取マトリックス</a>
                    <a href="/design.html" class="text-gray-600 hover:text-gray-900 text-sm">デザインから探す</a>
                    <a href="/plans.html" class="text-gray-600 hover:text-gray-900 text-sm">プラン一覧</a>
                    <a href="/rules.html" class="text-gray-900 hover:text-gray-600 text-sm font-medium">ルール・ガイドライン</a>
                    <a href="/downloads.html" class="text-gray-600 hover:text-gray-900 text-sm">ダウンロード</a>
                    <a href="/faq.html" class="text-gray-600 hover:text-gray-900 text-sm">よくある質問</a>
                </nav>
                <div class="md:hidden" x-data="{ mobileMenuOpen: false }">
                    <button @click="mobileMenuOpen = !mobileMenuOpen" type="button" class="text-gray-500 hover:text-gray-600 focus:outline-none">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                    
                    <!-- Mobile Menu -->
                    <div x-show="mobileMenuOpen" class="absolute top-16 right-4 bg-white shadow-lg rounded-lg border p-4 z-50 min-w-48">
                        <a href="/" class="block py-2 text-sm text-gray-600">ホーム</a>
                        <a href="/matrix.html" class="block py-2 text-sm text-gray-600">間取マトリックス</a>
                        <a href="/design.html" class="block py-2 text-sm text-gray-600">デザインから探す</a>
                        <a href="/plans.html" class="block py-2 text-sm text-gray-600">プラン一覧</a>
                        <a href="/rules.html" class="block py-2 text-sm text-gray-900">ルール・ガイドライン</a>
                        <a href="/downloads.html" class="block py-2 text-sm text-gray-600">ダウンロード</a>
                        <a href="/faq.html" class="block py-2 text-sm text-gray-600">よくある質問</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div x-data="rulesPage()" x-init="init()">
        <!-- Breadcrumb -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <nav class="breadcrumb">
                <a href="/">ホーム</a>
                <span class="breadcrumb-separator">></span>
                <span class="text-gray-900">ルール・ガイドライン</span>
            </nav>
        </div>

        <!-- Page Header -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-8">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-gray-900 mb-4">ルール・ガイドライン</h1>
                <p class="text-lg text-gray-600">加盟店が遵守すべき各種ルールと運用ガイドライン</p>
            </div>

            <!-- Loading State -->
            <div x-show="loading" class="flex justify-center py-12">
                <div class="loading-spinner"></div>
            </div>

            <!-- Category Grid View - Similar to Downloads -->
            <div x-show="!loading" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 max-w-6xl mx-auto">
                <!-- 営業ルール -->
                <div @click="openDetail('sales')" 
                     class="bg-white border border-gray-200 rounded-xl p-8 hover:shadow-lg hover:border-blue-300 transition-all duration-300 cursor-pointer group">
                    <div class="flex flex-col items-center">
                        <div class="w-20 h-20 bg-gradient-to-br from-green-50 to-green-100 rounded-full flex items-center justify-center mb-4 group-hover:from-green-100 group-hover:to-green-200 transition-colors">
                            <svg class="w-10 h-10 text-green-600" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M11,7V9H13V7H11M11,11V17H13V11H11Z"/>
                            </svg>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-800 text-center">営業ルール</h3>
                        <p class="text-sm text-gray-500 mt-1">12 項目</p>
                    </div>
                </div>

                <!-- 設計ルール -->
                <div @click="openDetail('design')" 
                     class="bg-white border border-gray-200 rounded-xl p-8 hover:shadow-lg hover:border-blue-300 transition-all duration-300 cursor-pointer group">
                    <div class="flex flex-col items-center">
                        <div class="w-20 h-20 bg-gradient-to-br from-blue-50 to-blue-100 rounded-full flex items-center justify-center mb-4 group-hover:from-blue-100 group-hover:to-blue-200 transition-colors">
                            <svg class="w-10 h-10 text-blue-600" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9A3,3 0 0,1 15,12Z"/>
                            </svg>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-800 text-center">設計ルール</h3>
                        <p class="text-sm text-gray-500 mt-1">16 項目</p>
                    </div>
                </div>

                <!-- 施工ルール -->
                <div @click="openDetail('construction')" 
                     class="bg-white border border-gray-200 rounded-xl p-8 hover:shadow-lg hover:border-blue-300 transition-all duration-300 cursor-pointer group">
                    <div class="flex flex-col items-center">
                        <div class="w-20 h-20 bg-gradient-to-br from-orange-50 to-orange-100 rounded-full flex items-center justify-center mb-4 group-hover:from-orange-100 group-hover:to-orange-200 transition-colors">
                            <svg class="w-10 h-10 text-orange-600" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z"/>
                            </svg>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-800 text-center">施工ルール</h3>
                        <p class="text-sm text-gray-500 mt-1">20 項目</p>
                    </div>
                </div>

                <!-- 広告・宣伝ルール -->
                <div @click="openDetail('advertising')" 
                     class="bg-white border border-gray-200 rounded-xl p-8 hover:shadow-lg hover:border-blue-300 transition-all duration-300 cursor-pointer group">
                    <div class="flex flex-col items-center">
                        <div class="w-20 h-20 bg-gradient-to-br from-purple-50 to-purple-100 rounded-full flex items-center justify-center mb-4 group-hover:from-purple-100 group-hover:to-purple-200 transition-colors">
                            <svg class="w-10 h-10 text-purple-600" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M18,11V12.5C21.19,12.5 23.09,16.05 21.33,18.71L20.24,17.62C21.06,15.96 19.85,14 18,14V15.5L15.75,13.25L18,11M18,22V20.5C14.81,20.5 12.91,16.95 14.67,14.29L15.76,15.38C14.94,17.04 16.15,19 18,19V17.5L20.25,19.75L18,22M19,3H18V1H16V3H8V1H6V3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H14C13.36,20.45 12.86,19.77 12.5,19H5V9H19V10.59C19.71,10.7 20.39,10.94 21,11.31V5A2,2 0 0,0 19,3Z"/>
                            </svg>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-800 text-center">広告・宣伝</h3>
                        <p class="text-sm text-gray-500 mt-1">8 項目</p>
                    </div>
                </div>

                <!-- 契約・手続きルール -->
                <div @click="openDetail('contract')" 
                     class="bg-white border border-gray-200 rounded-xl p-8 hover:shadow-lg hover:border-blue-300 transition-all duration-300 cursor-pointer group">
                    <div class="flex flex-col items-center">
                        <div class="w-20 h-20 bg-gradient-to-br from-red-50 to-red-100 rounded-full flex items-center justify-center mb-4 group-hover:from-red-100 group-hover:to-red-200 transition-colors">
                            <svg class="w-10 h-10 text-red-600" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M6,2A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6M6,4H13V9H18V20H6V4M8,12V14H16V12H8M8,16V18H13V16H8Z"/>
                            </svg>
                        </div>
                        <h3 class="text-lg font-semibold text-gray-800 text-center">契約・手続き</h3>
                        <p class="text-sm text-gray-500 mt-1">10 項目</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Detail Modal -->
        <div x-show="showDetailModal" 
             class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50" 
             @click="closeDetail()"
             style="display: none;">
            <div class="relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white" @click.stop>
                <div class="mt-3">
                    <!-- Modal Header -->
                    <div class="flex items-center justify-between pb-4 border-b border-gray-200">
                        <h3 x-text="selectedCategory?.title" class="text-2xl font-bold text-gray-900"></h3>
                        <button @click="closeDetail()" class="text-gray-400 hover:text-gray-600">
                            <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>
                    
                    <!-- Modal Content -->
                    <div class="mt-6 max-h-96 overflow-y-auto">
                        <div class="space-y-3">
                            <template x-for="item in selectedCategory?.items || []" :key="item.id">
                                <div class="border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors">
                                    <button @click="toggleItem(item.id)" class="w-full px-4 py-3 flex items-center justify-between text-left">
                                        <div class="flex-1">
                                            <h4 x-text="item.title" class="font-semibold text-gray-900"></h4>
                                            <p x-text="item.summary" class="text-sm text-gray-600 mt-1"></p>
                                        </div>
                                        <svg :class="expandedItems.includes(item.id) ? 'rotate-180' : ''" 
                                             class="w-5 h-5 text-gray-400 transition-transform duration-200 flex-shrink-0 ml-4" 
                                             fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                                        </svg>
                                    </button>
                                    
                                    <div x-show="expandedItems.includes(item.id)" 
                                         x-transition:enter="transition ease-out duration-200"
                                         x-transition:enter-start="opacity-0 transform -translate-y-2"
                                         x-transition:enter-end="opacity-100 transform translate-y-0"
                                         class="px-4 pb-4">
                                        <div class="pl-4 border-l-2 border-gray-200">
                                            <div x-html="item.content" class="text-sm text-gray-700 space-y-2"></div>
                                            <div x-show="item.documents && item.documents.length > 0" class="mt-3 pt-3 border-t border-gray-100">
                                                <p class="text-xs text-gray-500 mb-2">関連資料</p>
                                                <div class="flex flex-wrap gap-2">
                                                    <template x-for="doc in item.documents" :key="doc.id">
                                                        <button @click="downloadDocument(doc)" 
                                                                class="text-xs px-2 py-1 bg-blue-50 text-blue-600 rounded hover:bg-blue-100 transition-colors">
                                                            <span x-text="doc.name"></span>
                                                        </button>
                                                    </template>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function rulesPage() {
            return {
                loading: false,
                showDetailModal: false,
                selectedCategory: null,
                expandedItems: [],
                categories: {
                    sales: {
                        title: '営業ルール',
                        items: [
                            { 
                                id: 1, 
                                title: '価格・見積りルール',
                                summary: '標準価格の適用と見積書作成の基準',
                                content: `
                                    <ul class="list-disc list-inside space-y-1">
                                        <li>標準価格の適用範囲と条件</li>
                                        <li>オプション価格設定基準</li>
                                        <li>値引き・割引の制限事項</li>
                                        <li>見積書作成の標準フォーマット</li>
                                    </ul>
                                `,
                                documents: [
                                    { id: 1, name: '価格表.pdf' },
                                    { id: 2, name: '見積書テンプレート.xlsx' }
                                ]
                            },
                            { 
                                id: 2, 
                                title: 'お客様対応基準',
                                summary: '初回面談から契約までの対応ルール',
                                content: `
                                    <ul class="list-disc list-inside space-y-1">
                                        <li>初回面談時の説明事項</li>
                                        <li>契約前の重要事項説明</li>
                                        <li>アフターサービス対応</li>
                                        <li>クレーム対応フロー</li>
                                    </ul>
                                `,
                                documents: [
                                    { id: 3, name: '対応マニュアル.pdf' }
                                ]
                            }
                        ]
                    },
                    design: {
                        title: '設計ルール',
                        items: [
                            { 
                                id: 3, 
                                title: '構造設計基準',
                                summary: '建築基準法に準拠した構造設計',
                                content: `
                                    <ul class="list-disc list-inside space-y-1">
                                        <li>建築基準法に準拠した構造計算</li>
                                        <li>耐震等級3の確保</li>
                                        <li>基礎設計の標準仕様遵守</li>
                                        <li>構造材の品質管理基準</li>
                                    </ul>
                                `,
                                documents: [
                                    { id: 4, name: '構造計算書サンプル.pdf' },
                                    { id: 5, name: '標準仕様書.pdf' }
                                ]
                            },
                            { 
                                id: 4, 
                                title: '意匠設計基準',
                                summary: 'LIFE Xデザインガイドライン',
                                content: `
                                    <ul class="list-disc list-inside space-y-1">
                                        <li>LIFE Xデザインガイドライン準拠</li>
                                        <li>標準プランからの変更制限事項</li>
                                        <li>外観・内装の品質基準</li>
                                        <li>カラーバリエーションの適用ルール</li>
                                    </ul>
                                `,
                                documents: [
                                    { id: 6, name: 'デザインガイドライン.pdf' }
                                ]
                            }
                        ]
                    },
                    construction: {
                        title: '施工ルール',
                        items: [
                            { 
                                id: 5, 
                                title: '施工品質基準',
                                summary: '各工程の品質管理ポイント',
                                content: `
                                    <ul class="list-disc list-inside space-y-1">
                                        <li>各工程の品質チェックポイント</li>
                                        <li>使用材料の品質管理</li>
                                        <li>施工精度の許容範囲</li>
                                        <li>完了検査前の自主検査</li>
                                    </ul>
                                `,
                                documents: [
                                    { id: 7, name: '品質管理チェックシート.xlsx' }
                                ]
                            },
                            { 
                                id: 6, 
                                title: '工程管理基準',
                                summary: '標準工程表と進捗管理',
                                content: `
                                    <ul class="list-disc list-inside space-y-1">
                                        <li>標準工程表の遵守</li>
                                        <li>工程遅延時の対応手順</li>
                                        <li>雨天・悪天候時の作業基準</li>
                                        <li>近隣への配慮事項</li>
                                    </ul>
                                `,
                                documents: [
                                    { id: 8, name: '標準工程表.pdf' }
                                ]
                            }
                        ]
                    },
                    advertising: {
                        title: '広告・宣伝ルール',
                        items: [
                            { 
                                id: 7, 
                                title: 'ブランドガイドライン',
                                summary: 'LIFE Xブランドの使用規定',
                                content: `
                                    <ul class="list-disc list-inside space-y-1">
                                        <li>ロゴ使用規定</li>
                                        <li>カラー規定</li>
                                        <li>フォント規定</li>
                                        <li>禁止事項</li>
                                    </ul>
                                `,
                                documents: [
                                    { id: 9, name: 'ブランドガイドライン.pdf' },
                                    { id: 10, name: 'ロゴデータ.zip' }
                                ]
                            }
                        ]
                    },
                    contract: {
                        title: '契約・手続きルール',
                        items: [
                            { 
                                id: 8, 
                                title: '契約書類の作成・管理',
                                summary: '契約書の作成と保管ルール',
                                content: `
                                    <ul class="list-disc list-inside space-y-1">
                                        <li>契約書の必須記載事項</li>
                                        <li>印紙税の取り扱い</li>
                                        <li>契約書の保管期間と方法</li>
                                        <li>電子契約の取り扱い</li>
                                    </ul>
                                `,
                                documents: [
                                    { id: 11, name: '契約書テンプレート.docx' }
                                ]
                            }
                        ]
                    }
                },

                init() {
                    // 初期化処理
                },

                openDetail(categoryKey) {
                    this.selectedCategory = this.categories[categoryKey];
                    this.expandedItems = [];
                    this.showDetailModal = true;
                },

                closeDetail() {
                    this.showDetailModal = false;
                    this.selectedCategory = null;
                    this.expandedItems = [];
                },

                toggleItem(itemId) {
                    const index = this.expandedItems.indexOf(itemId);
                    if (index > -1) {
                        this.expandedItems.splice(index, 1);
                    } else {
                        this.expandedItems.push(itemId);
                    }
                },

                downloadDocument(doc) {
                    console.log('Downloading:', doc.name);
                    lifeXAPI.showToast(`${doc.name}のダウンロードを開始しました`, 'success');
                }
            }
        }
    </script>
</body>
</html>