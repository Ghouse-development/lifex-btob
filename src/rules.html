<!DOCTYPE html>
<html lang="ja" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ルール | LIFE X 加盟店専用サイト</title>
    <link href="./styles/main.css" rel="stylesheet">
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="./utils/api.js"></script>
</head>
<body class="h-full bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <h1 class="text-xl font-bold text-gray-900">LIFE X</h1>
                    <span class="ml-2 px-2 py-1 bg-primary-100 text-primary-800 text-xs rounded-full">加盟店専用</span>
                </div>
                <nav class="hidden md:flex space-x-8">
                    <a href="/" class="nav-link">ホーム</a>
                    <a href="/matrix.html" class="nav-link">間取マトリックス</a>
                    <a href="/plans.html" class="nav-link">プラン一覧</a>
                    <a href="/rules.html" class="nav-link active">ルール</a>
                    <a href="/downloads.html" class="nav-link">ダウンロード</a>
                </nav>
                <div class="md:hidden" x-data="{ mobileMenuOpen: false }">
                    <button @click="mobileMenuOpen = !mobileMenuOpen" type="button" class="text-gray-500 hover:text-gray-600 focus:outline-none">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                    
                    <!-- Mobile Menu -->
                    <div x-show="mobileMenuOpen" class="absolute top-16 right-4 bg-white shadow-lg rounded-lg border p-4 z-50 min-w-48">
                        <a href="/" class="nav-link block">ホーム</a>
                        <a href="/matrix.html" class="nav-link block">間取マトリックス</a>
                        <a href="/plans.html" class="nav-link block">プラン一覧</a>
                        <a href="/rules.html" class="nav-link block">ルール</a>
                        <a href="/downloads.html" class="nav-link block">ダウンロード</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div x-data="rulesPage()" x-init="init()">
        <!-- Breadcrumb -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <nav class="breadcrumb">
                <a href="/">ホーム</a>
                <span class="breadcrumb-separator">></span>
                <span class="text-gray-900">ルール</span>
            </nav>
        </div>

        <!-- Page Header -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-8">
            <div class="text-center">
                <h1 class="text-3xl font-bold text-gray-900 mb-4">LIFE X ルール・ガイドライン</h1>
                <p class="text-lg text-gray-600 mb-8">加盟店が遵守すべき各種ルールと運用ガイドライン</p>
            </div>
        </div>

        <!-- Rules Sections -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-16">
            <div class="space-y-8">
                <!-- 営業ルール -->
                <div class="card">
                    <div class="flex items-center space-x-4 mb-6">
                        <div class="w-12 h-12 bg-gradient-to-r from-green-500 to-green-600 rounded-xl flex items-center justify-center">
                            <span class="text-white text-xl">💼</span>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-gray-900">営業ルール</h2>
                            <p class="text-gray-600">営業活動における基本ルールと注意事項</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6">
                            <h3 class="font-semibold text-green-900 mb-3">💰 価格・見積りルール</h3>
                            <ul class="text-sm text-green-800 space-y-2">
                                <li @click="showDetail('標準価格の適用範囲')" class="cursor-pointer">• 標準価格の適用範囲</li>
                                <li @click="showDetail('オプション価格設定基準')" class="cursor-pointer">• オプション価格設定基準</li>
                                <li @click="showDetail('値引き・割引の制限事項')" class="cursor-pointer">• 値引き・割引の制限事項</li>
                                <li @click="showDetail('見積書作成の標準フォーマット')" class="cursor-pointer">• 見積書作成の標準フォーマット</li>
                            </ul>
                        </div>
                        
                        <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6">
                            <h3 class="font-semibold text-green-900 mb-3">📞 お客様対応基準</h3>
                            <ul class="text-sm text-green-800 space-y-2">
                                <li @click="showDetail('初回面談時の説明事項')" class="cursor-pointer">• 初回面談時の説明事項</li>
                                <li @click="showDetail('契約前の重要事項説明')" class="cursor-pointer">• 契約前の重要事項説明</li>
                                <li @click="showDetail('アフターサービス対応')" class="cursor-pointer">• アフターサービス対応</li>
                                <li @click="showDetail('クレーム対応フロー')" class="cursor-pointer">• クレーム対応フロー</li>
                            </ul>
                        </div>
                        
                        <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6">
                            <h3 class="font-semibold text-green-900 mb-3">📢 広告・宣伝ルール</h3>
                            <ul class="text-sm text-green-800 space-y-2">
                                <li @click="showDetail('LIFE Xブランドガイドライン')" class="cursor-pointer">• LIFE Xブランドガイドライン</li>
                                <li @click="showDetail('広告表現の制限事項')" class="cursor-pointer">• 広告表現の制限事項</li>
                                <li @click="showDetail('SNS・Web広告の運用基準')" class="cursor-pointer">• SNS・Web広告の運用基準</li>
                                <li @click="showDetail('チラシ・パンフレットの作成基準')" class="cursor-pointer">• チラシ・パンフレットの作成基準</li>
                            </ul>
                        </div>
                        
                        <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6">
                            <h3 class="font-semibold text-green-900 mb-3">📝 契約・手続きルール</h3>
                            <ul class="text-sm text-green-800 space-y-2">
                                <li @click="showDetail('契約書類の作成・管理')" class="cursor-pointer">• 契約書類の作成・管理</li>
                                <li @click="showDetail('工事請負契約の締結手順')" class="cursor-pointer">• 工事請負契約の締結手順</li>
                                <li @click="showDetail('変更契約の取り扱い')" class="cursor-pointer">• 変更契約の取り扱い</li>
                                <li @click="showDetail('支払い条件・タイミング')" class="cursor-pointer">• 支払い条件・タイミング</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- 設計ルール -->
                <div class="card">
                    <div class="flex items-center space-x-4 mb-6">
                        <div class="w-12 h-12 bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl flex items-center justify-center">
                            <span class="text-white text-xl">📐</span>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-gray-900">設計ルール</h2>
                            <p class="text-gray-600">建築設計における基準とガイドライン</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6">
                            <h3 class="font-semibold text-blue-900 mb-3 flex items-center justify-between">
                                <span>🏗️ 構造設計基準</span>
                                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                                </svg>
                            </h3>
                            <ul class="text-sm text-blue-800 space-y-2">
                                <li @click="showDetail('建築基準法に準拠した構造計算')" class="cursor-pointer">• 建築基準法に準拠した構造計算</li>
                                <li @click="showDetail('耐震等級3の確保')" class="cursor-pointer">• 耐震等級3の確保</li>
                                <li @click="showDetail('基礎設計の標準仕様遵守')" class="cursor-pointer">• 基礎設計の標準仕様遵守</li>
                                <li @click="showDetail('構造材の品質管理基準')" class="cursor-pointer">• 構造材の品質管理基準</li>
                            </ul>
                        </div>
                        
                        <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6">
                            <h3 class="font-semibold text-blue-900 mb-3 flex items-center justify-between">
                                <span>🎨 意匠設計基準</span>
                                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                                </svg>
                            </h3>
                            <ul class="text-sm text-blue-800 space-y-2">
                                <li @click="showDetail('LIFE Xデザインガイドライン準拠')" class="cursor-pointer">• LIFE Xデザインガイドライン準拠</li>
                                <li @click="showDetail('標準プランからの変更制限事項')" class="cursor-pointer">• 標準プランからの変更制限事項</li>
                                <li @click="showDetail('外観・内装の品質基準')" class="cursor-pointer">• 外観・内装の品質基準</li>
                                <li @click="showDetail('カラーバリエーションの適用ルール')" class="cursor-pointer">• カラーバリエーションの適用ルール</li>
                            </ul>
                        </div>
                        
                        <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6">
                            <h3 class="font-semibold text-blue-900 mb-3 flex items-center justify-between">
                                <span>⚡ 設備設計基準</span>
                                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                                </svg>
                            </h3>
                            <ul class="text-sm text-blue-800 space-y-2">
                                <li @click="showDetail('電気設備の標準仕様')" class="cursor-pointer">• 電気設備の標準仕様</li>
                                <li @click="showDetail('給排水設備の配置基準')" class="cursor-pointer">• 給排水設備の配置基準</li>
                                <li @click="showDetail('空調・換気システムの設計基準')" class="cursor-pointer">• 空調・換気システムの設計基準</li>
                                <li @click="showDetail('省エネ性能の確保')" class="cursor-pointer">• 省エネ性能の確保</li>
                            </ul>
                        </div>
                        
                        <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6">
                            <h3 class="font-semibold text-blue-900 mb-3 flex items-center justify-between">
                                <span>📋 申請・手続き</span>
                                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                                </svg>
                            </h3>
                            <ul class="text-sm text-blue-800 space-y-2">
                                <li @click="showDetail('建築確認申請の手順')" class="cursor-pointer">• 建築確認申請の手順</li>
                                <li @click="showDetail('長期優良住宅認定申請')" class="cursor-pointer">• 長期優良住宅認定申請</li>
                                <li @click="showDetail('住宅性能評価申請')" class="cursor-pointer">• 住宅性能評価申請</li>
                                <li @click="showDetail('各種検査・完了検査対応')" class="cursor-pointer">• 各種検査・完了検査対応</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- 施工ルール -->
                <div class="card">
                    <div class="flex items-center space-x-4 mb-6">
                        <div class="w-12 h-12 bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl flex items-center justify-center">
                            <span class="text-white text-xl">🔨</span>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-gray-900">施工ルール</h2>
                            <p class="text-gray-600">施工における品質管理と作業基準</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-6">
                            <h3 class="font-semibold text-orange-900 mb-3">⚒️ 施工品質基準</h3>
                            <ul class="text-sm text-green-800 space-y-2">
                                <li @click="showDetail('標準価格の適用範囲')" class="cursor-pointer">• 標準価格の適用範囲</li>
                                <li @click="showDetail('オプション価格設定基準')" class="cursor-pointer">• オプション価格設定基準</li>
                                <li @click="showDetail('値引き・割引の制限事項')" class="cursor-pointer">• 値引き・割引の制限事項</li>
                                <li @click="showDetail('見積書作成の標準フォーマット')" class="cursor-pointer">• 見積書作成の標準フォーマット</li>
                            </ul>
                        </div>
                        
                        <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6">
                            <h3 class="font-semibold text-green-900 mb-3">📞 お客様対応基準</h3>
                            <ul class="text-sm text-green-800 space-y-2">
                                <li @click="showDetail('初回面談時の説明事項')" class="cursor-pointer">• 初回面談時の説明事項</li>
                                <li @click="showDetail('契約前の重要事項説明')" class="cursor-pointer">• 契約前の重要事項説明</li>
                                <li @click="showDetail('アフターサービス対応')" class="cursor-pointer">• アフターサービス対応</li>
                                <li @click="showDetail('クレーム対応フロー')" class="cursor-pointer">• クレーム対応フロー</li>
                            </ul>
                        </div>
                        
                        <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6">
                            <h3 class="font-semibold text-green-900 mb-3">📢 広告・宣伝ルール</h3>
                            <ul class="text-sm text-green-800 space-y-2">
                                <li @click="showDetail('LIFE Xブランドガイドライン')" class="cursor-pointer">• LIFE Xブランドガイドライン</li>
                                <li @click="showDetail('広告表現の制限事項')" class="cursor-pointer">• 広告表現の制限事項</li>
                                <li @click="showDetail('SNS・Web広告の運用基準')" class="cursor-pointer">• SNS・Web広告の運用基準</li>
                                <li @click="showDetail('チラシ・パンフレットの作成基準')" class="cursor-pointer">• チラシ・パンフレットの作成基準</li>
                            </ul>
                        </div>
                        
                        <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-6">
                            <h3 class="font-semibold text-green-900 mb-3">📝 契約・手続きルール</h3>
                            <ul class="text-sm text-green-800 space-y-2">
                                <li @click="showDetail('契約書類の作成・管理')" class="cursor-pointer">• 契約書類の作成・管理</li>
                                <li @click="showDetail('工事請負契約の締結手順')" class="cursor-pointer">• 工事請負契約の締結手順</li>
                                <li @click="showDetail('変更契約の取り扱い')" class="cursor-pointer">• 変更契約の取り扱い</li>
                                <li @click="showDetail('支払い条件・タイミング')" class="cursor-pointer">• 支払い条件・タイミング</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- 施工ルール -->
                <div class="card">
                    <div class="flex items-center space-x-4 mb-6">
                        <div class="w-12 h-12 bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl flex items-center justify-center">
                            <span class="text-white text-xl">🔨</span>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-gray-900">施工ルール</h2>
                            <p class="text-gray-600">施工品質管理と工程管理の基準</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-6">
                            <h3 class="font-semibold text-orange-900 mb-3">⚒️ 施工品質基準</h3>
                            <ul class="text-sm text-orange-800 space-y-2">
                                <li @click="showDetail('各工程の品質チェックポイント')" class="cursor-pointer">• 各工程の品質チェックポイント</li>
                                <li @click="showDetail('使用材料の品質管理')" class="cursor-pointer">• 使用材料の品質管理</li>
                                <li @click="showDetail('施工精度の許容範囲')" class="cursor-pointer">• 施工精度の許容範囲</li>
                                <li @click="showDetail('完了検査前の自主検査')" class="cursor-pointer">• 完了検査前の自主検査</li>
                            </ul>
                        </div>
                        
                        <div class="bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-6">
                            <h3 class="font-semibold text-orange-900 mb-3">📅 工程管理基準</h3>
                            <ul class="text-sm text-orange-800 space-y-2">
                                <li @click="showDetail('標準工程表の遵守')" class="cursor-pointer">• 標準工程表の遵守</li>
                                <li @click="showDetail('工程遅延時の対応手順')" class="cursor-pointer">• 工程遅延時の対応手順</li>
                                <li @click="showDetail('雨天・悪天候時の作業基準')" class="cursor-pointer">• 雨天・悪天候時の作業基準</li>
                                <li @click="showDetail('近隣への配慮事項')" class="cursor-pointer">• 近隣への配慮事項</li>
                            </ul>
                        </div>
                        
                        <div class="bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-6">
                            <h3 class="font-semibold text-orange-900 mb-3">🏠 現場管理基準</h3>
                            <ul class="text-sm text-orange-800 space-y-2">
                                <li @click="showDetail('現場の整理整頓・5S活動')" class="cursor-pointer">• 現場の整理整頓・5S活動</li>
                                <li @click="showDetail('安全管理・事故防止対策')" class="cursor-pointer">• 安全管理・事故防止対策</li>
                                <li @click="showDetail('廃棄物処理・環境対策')" class="cursor-pointer">• 廃棄物処理・環境対策</li>
                                <li @click="showDetail('職人・作業員の管理')" class="cursor-pointer">• 職人・作業員の管理</li>
                            </ul>
                        </div>
                        
                        <div class="bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-6">
                            <h3 class="font-semibold text-orange-900 mb-3">📋 検査・記録</h3>
                            <ul class="text-sm text-orange-800 space-y-2">
                                <li @click="showDetail('各種検査の実施・記録')" class="cursor-pointer">• 各種検査の実施・記録</li>
                                <li @click="showDetail('施工写真の撮影・管理')" class="cursor-pointer">• 施工写真の撮影・管理</li>
                                <li @click="showDetail('品質管理書類の作成')" class="cursor-pointer">• 品質管理書類の作成</li>
                                <li @click="showDetail('お客様への工程報告')" class="cursor-pointer">• お客様への工程報告</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- 品質管理・アフターサービス -->
                <div class="card">
                    <div class="flex items-center space-x-4 mb-6">
                        <div class="w-12 h-12 bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl flex items-center justify-center">
                            <span class="text-white text-xl">⭐</span>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-gray-900">品質管理・アフターサービス</h2>
                            <p class="text-gray-600">品質向上とお客様満足度向上のための基準</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6">
                            <h3 class="font-semibold text-purple-900 mb-3">🔍 品質管理体制</h3>
                            <ul class="text-sm text-purple-800 space-y-2">
                                <li @click="showDetail('第三者検査機関の活用')" class="cursor-pointer">• 第三者検査機関の活用</li>
                                <li @click="showDetail('内部監査の実施')" class="cursor-pointer">• 内部監査の実施</li>
                                <li @click="showDetail('品質向上のための改善活動')" class="cursor-pointer">• 品質向上のための改善活動</li>
                                <li @click="showDetail('不具合発生時の対応体制')" class="cursor-pointer">• 不具合発生時の対応体制</li>
                            </ul>
                        </div>
                        
                        <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6">
                            <h3 class="font-semibold text-purple-900 mb-3">🔧 アフターサービス</h3>
                            <ul class="text-sm text-purple-800 space-y-2">
                                <li @click="showDetail('引渡し後の定期点検')" class="cursor-pointer">• 引渡し後の定期点検</li>
                                <li @click="showDetail('保証対応・メンテナンス')" class="cursor-pointer">• 保証対応・メンテナンス</li>
                                <li @click="showDetail('お客様相談窓口の運営')" class="cursor-pointer">• お客様相談窓口の運営</li>
                                <li @click="showDetail('緊急時対応体制')" class="cursor-pointer">• 緊急時対応体制</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Q&A Section -->
                <div class="card  mt-8">
                    <div class="flex items-center space-x-4 mb-6">
                        <div class="w-12 h-12 bg-gradient-to-r from-cyan-500 to-cyan-600 rounded-xl flex items-center justify-center">
                            <span class="text-white text-xl">❓</span>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-gray-900">よくある質問 (Q&A)</h2>
                            <p class="text-gray-600">加盟店様からよくいただく質問と回答</p>
                        </div>
                    </div>
                    
                    <div class="space-y-4">
                        <template x-for="(qa, index) in qas" :key="index">
                            <div class="border border-gray-200 rounded-lg overflow-hidden">
                                <button @click="qa.open = !qa.open" class="w-full px-6 py-4 bg-gradient-to-r from-gray-50 to-gray-100 hover:from-gray-100 hover:to-gray-150 transition-colors flex items-center justify-between text-left">
                                    <div class="flex items-start space-x-3">
                                        <span class="text-lg font-bold text-primary-600">Q.</span>
                                        <span x-text="qa.question" class="font-medium text-gray-900"></span>
                                    </div>
                                    <svg :class="qa.open ? 'rotate-180' : ''" class="w-5 h-5 text-gray-500 transform transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                                    </svg>
                                </button>
                                <div x-show="qa.open" class="px-6 py-4 bg-white border-t border-gray-200">
                                    <div class="flex items-start space-x-3">
                                        <span class="text-lg font-bold text-green-600">A.</span>
                                        <div x-html="qa.answer" class="text-gray-700"></div>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Detail Modal -->
    <div x-show="showDetailModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50" @click="closeDetailModal()" style="display: none;" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0">
        <div class="relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white" @click.stop>
            <div class="mt-3">
                <!-- Modal Header -->
                <div class="flex items-center justify-between pb-4 border-b border-gray-200">
                    <h3 x-text="selectedDetail?.title" class="text-2xl font-bold text-gray-900"></h3>
                    <button @click="closeDetailModal" class="text-gray-400 hover:text-gray-600">
                        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>

                <!-- Modal Content -->
                <div class="py-6">
                    <div x-html="selectedDetail?.content" class="prose max-w-none"></div>
                </div>

                <!-- Modal Footer -->
                <div class="flex justify-end pt-4 border-t border-gray-200">
                    <button @click="downloadPDF(selectedDetail?.id)" class="btn-secondary mr-3">📥 PDFダウンロード</button>
                    <button @click="closeDetailModal" class="btn-primary">閉じる</button>
                </div>
            </div>
        </div>
    </div>

    <!-- AI Bot Q&A Modal -->
    <div x-show="showAIModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50" @click="closeAIModal()" style="display: none;" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0">
        <div class="relative top-10 mx-auto p-5 border w-11/12 max-w-3xl shadow-lg rounded-md bg-white" @click.stop>
            <div class="mt-3">
                <!-- Modal Header -->
                <div class="flex items-center justify-between pb-4 border-b border-gray-200">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-gradient-to-r from-purple-500 to-purple-600 rounded-full flex items-center justify-center">
                            <span class="text-white text-lg">🤖</span>
                        </div>
                        <h3 class="text-2xl font-bold text-gray-900">LIFE X AIサポート</h3>
                    </div>
                    <button @click="closeAIModal" class="text-gray-400 hover:text-gray-600">
                        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>

                <!-- Chat Area -->
                <div class="py-4">
                    <div class="h-80 overflow-y-auto bg-gray-50 rounded-lg p-4 mb-4" id="chatArea">
                        <!-- Welcome Message -->
                        <div class="mb-4">
                            <div class="flex items-start space-x-3">
                                <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center">
                                    <span class="text-white text-sm">AI</span>
                                </div>
                                <div class="bg-white p-3 rounded-lg shadow-sm max-w-md">
                                    <p class="text-gray-700">こんにちは！LIFE Xのルールや手続きについて、何でもお気軽にご質問ください。</p>
                                </div>
                            </div>
                        </div>

                        <!-- Chat Messages -->
                        <template x-for="message in chatMessages" :key="message.id">
                            <div class="mb-4">
                                <div class="flex items-start space-x-3" :class="message.type === 'user' ? 'flex-row-reverse space-x-reverse' : ''">
                                    <div class="w-8 h-8 rounded-full flex items-center justify-center" :class="message.type === 'user' ? 'bg-blue-500' : 'bg-purple-500'">
                                        <span class="text-white text-sm" x-text="message.type === 'user' ? 'You' : 'AI'"></span>
                                    </div>
                                    <div class="p-3 rounded-lg shadow-sm max-w-md" :class="message.type === 'user' ? 'bg-blue-100' : 'bg-white'">
                                        <p class="text-gray-700" x-html="message.content"></p>
                                        <p class="text-xs text-gray-500 mt-1" x-text="message.timestamp"></p>
                                    </div>
                                </div>
                            </div>
                        </template>

                        <!-- Typing Indicator -->
                        <div x-show="isTyping" class="mb-4">
                            <div class="flex items-start space-x-3">
                                <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center">
                                    <span class="text-white text-sm">AI</span>
                                </div>
                                <div class="bg-white p-3 rounded-lg shadow-sm">
                                    <div class="flex space-x-1">
                                        <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
                                        <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                                        <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Input Area -->
                    <div class="flex space-x-3">
                        <input type="text" 
                               x-model="currentQuestion" 
                               @keydown.enter="sendQuestion()"
                               placeholder="質問を入力してください..."
                               class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        <button @click="sendQuestion()" 
                                :disabled="!currentQuestion.trim() || isTyping"
                                class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 focus:ring-2 focus:ring-purple-500 disabled:bg-gray-400 disabled:cursor-not-allowed">
                            送信
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function rulesPage() {
            return {
                loading: false,
                showDetailModal: false,
                selectedDetail: null,
                showAIModal: false,
                currentQuestion: '',
                isTyping: false,
                chatMessages: [],
                qas: [
                    {
                        question: 'LIFE Xの標準プランを変更できますか？',
                        answer: 'LIFE Xの標準プランは、基本的な構造や間取りは維持したまま、一定の範囲内でカスタマイズが可能です。<br><br>変更可能な項目：<ul class="mt-2 ml-4 list-disc"><li>内装カラーバリエーション</li><li>設備のグレードアップ</li><li>オプションの追加</li></ul>',
                        open: false
                    },
                    {
                        question: '耐震等級3の確保に必要な追加費用はありますか？',
                        answer: 'LIFE Xの標準仕様では、耐震等級3が基本仕様に含まれているため、追加費用は発生しません。ただし、地盤調査の結果によっては、地盤改良工事などが必要になる場合があります。',
                        open: false
                    },
                    {
                        question: '営業エリアに制限はありますか？',
                        answer: '加盟店様の営業エリアは、加盟契約時に定められた地域内での活動が基本となります。ただし、隣接エリアでの営業を希望される場合は、事前にご相談ください。',
                        open: false
                    },
                    {
                        question: '引渡し後のアフターサービス体制は？',
                        answer: 'LIFE Xでは、引渡し後のアフターサービスも重要視しています。<br><br>保証内容：<ul class="mt-2 ml-4 list-disc"><li>構造躯体：10年保証</li><li>防水：10年保証</li><li>設備機器：メーカー保証に準ずる</li></ul><br>定期点検：<ul class="mt-2 ml-4 list-disc"><li>1年点検</li><li>2年点検</li><li>5年点検</li><li>10年点検</li></ul>',
                        open: false
                    },
                    {
                        question: '工事期間の目安はどのくらいですか？',
                        answer: 'LIFE Xの標準的な工事期間は、着工から引渡しまで約4～5ヶ月です。<br><br>工程の目安：<ul class="mt-2 ml-4 list-disc"><li>基礎工事：約1ヶ月</li><li>躯体工事：約1ヶ月</li><li>内外装工事：約1.5ヶ月</li><li>設備工事・完了検査：約0.5ヶ月</li></ul>',
                        open: false
                    }
                ],
                detailContents: {
                    '構造設計基準': {
                        title: '構造設計基準の詳細',
                        content: `
                            <h3 class="text-xl font-bold mb-4">構造設計基準の詳細</h3>
                            <div class="space-y-6">
                                <div>
                                    <h4 class="text-lg font-semibold text-blue-900 mb-2">1. 建築基準法に準拠した構造計算</h4>
                                    <p class="text-gray-700 mb-3">全ての構造計算は、最新の建築基準法および関連法令に準拠して実施します。</p>
                                    <ul class="list-disc ml-6 space-y-2 text-gray-600">
                                        <li>許容応力度計算の実施</li>
                                        <li>地域係数、用途係数の適用</li>
                                        <li>積雪荷重、風荷重の考慮</li>
                                        <li>地震力の算定と検証</li>
                                    </ul>
                                </div>
                                
                                <div>
                                    <h4 class="text-lg font-semibold text-blue-900 mb-2">2. 耐震等級3の確保</h4>
                                    <p class="text-gray-700 mb-3">住宅性能表示制度における最高等級の耐震性能を確保します。</p>
                                    <ul class="list-disc ml-6 space-y-2 text-gray-600">
                                        <li>建築基準法の1.5倍の地震力に耐える構造</li>
                                        <li>極めて稀な地震でも倒壊・崩壊しない</li>
                                        <li>構造躯体の損傷を最小限に抑える</li>
                                        <li>第三者機関による性能評価の実施</li>
                                    </ul>
                                </div>
                                
                                <div>
                                    <h4 class="text-lg font-semibold text-blue-900 mb-2">3. 基礎設計の標準仕様</h4>
                                    <p class="text-gray-700 mb-3">地盤調査結果に基づき、適切な基礎形式を選定します。</p>
                                    <ul class="list-disc ml-6 space-y-2 text-gray-600">
                                        <li>スウェーデン式サウンディング試験の実施</li>
                                        <li>地耐力30kN/㎡以上の確保</li>
                                        <li>ベタ基礎を標準とし、必要に応じて杵基礎を採用</li>
                                        <li>基礎配筋のD13@200以上を確保</li>
                                    </ul>
                                </div>
                            </div>
                        `,
                        id: 'structure-design-standards'
                    },
                    '意匠設計基準': {
                        title: '意匠設計基準の詳細',
                        content: `
                            <h3 class="text-xl font-bold mb-4">意匠設計基準の詳細</h3>
                            <div class="space-y-6">
                                <div>
                                    <h4 class="text-lg font-semibold text-blue-900 mb-2">1. LIFE Xデザインガイドライン</h4>
                                    <p class="text-gray-700 mb-3">統一されたデザインコンセプトに基づいた設計を行います。</p>
                                    <ul class="list-disc ml-6 space-y-2 text-gray-600">
                                        <li>シンプルモダンを基調とした外観デザイン</li>
                                        <li>機能性と美しさを両立した内装デザイン</li>
                                        <li>自然光を最大限に活用する開口部計画</li>
                                        <li>プライバシーと開放感のバランス</li>
                                    </ul>
                                </div>
                            </div>
                        `,
                        id: 'design-standards'
                    },
                    // 意匠設計基準のサブ項目
                    'LIFE Xデザインガイドライン準拠': {
                        title: 'LIFE Xデザインガイドライン準拠',
                        content: `<h3 class="text-xl font-bold mb-4">LIFE Xデザインガイドライン準拠</h3>
                            <p class="text-gray-700">LIFE Xのブランドアイデンティティを保つための設計指針です。外観・内装の統一感を保ちながら、お客様のニーズに応えます。</p>`,
                        id: 'lifex-design-guideline'
                    },
                    '標準プランからの変更制限事項': {
                        title: '標準プランからの変更制限事項',
                        content: `<h3 class="text-xl font-bold mb-4">標準プランからの変更制限事項</h3>
                            <p class="text-gray-700">構造の安全性と品質を保つため、主要構造部の変更は制限されています。内装・設備については一定範囲でカスタマイズ可能です。</p>`,
                        id: 'plan-change-restrictions'
                    },
                    '外観・内装の品質基準': {
                        title: '外観・内装の品質基準',
                        content: `<h3 class="text-xl font-bold mb-4">外観・内装の品質基準</h3>
                            <p class="text-gray-700">使用材料の品質、施工精度、仕上げの美しさにおいて、LIFE X独自の高い基準を設けています。</p>`,
                        id: 'quality-standards'
                    },
                    'カラーバリエーションの適用ルール': {
                        title: 'カラーバリエーションの適用ルール',
                        content: `<h3 class="text-xl font-bold mb-4">カラーバリエーションの適用ルール</h3>
                            <p class="text-gray-700">外壁・内装のカラーバリエーションは、指定された組み合わせから選択いただけます。統一感のある美しい仕上がりを実現します。</p>`,
                        id: 'color-variation-rules'
                    },
                    // 設備設計基準のサブ項目
                    '電気設備の標準仕様': {
                        title: '電気設備の標準仕様',
                        content: `<h3 class="text-xl font-bold mb-4">電気設備の標準仕様</h3>
                            <p class="text-gray-700">照明計画、コンセント配置、分電盤設計など、快適な暮らしを支える電気設備の標準仕様を定めています。</p>`,
                        id: 'electrical-standards'
                    },
                    '給排水設備の配置基準': {
                        title: '給排水設備の配置基準',
                        content: `<h3 class="text-xl font-bold mb-4">給排水設備の配置基準</h3>
                            <p class="text-gray-700">水回りの配置、配管ルート、給水圧力など、効率的で メンテナンスしやすい設備配置の基準です。</p>`,
                        id: 'plumbing-standards'
                    },
                    '空調・換気システムの設計基準': {
                        title: '空調・換気システムの設計基準',
                        content: `<h3 class="text-xl font-bold mb-4">空調・換気システムの設計基準</h3>
                            <p class="text-gray-700">24時間換気システム、エアコン配置計画など、快適な室内環境を実現するための設計基準です。</p>`,
                        id: 'hvac-standards'
                    },
                    '省エネ性能の確保': {
                        title: '省エネ性能の確保',
                        content: `<h3 class="text-xl font-bold mb-4">省エネ性能の確保</h3>
                            <p class="text-gray-700">断熱性能、気密性能、省エネ設備の採用により、高い省エネルギー性能を実現します。</p>`,
                        id: 'energy-efficiency'
                    },
                    // 申請・手続きのサブ項目
                    '建築確認申請の手順': {
                        title: '建築確認申請の手順',
                        content: `<h3 class="text-xl font-bold mb-4">建築確認申請の手順</h3>
                            <p class="text-gray-700">建築確認申請の必要書類、提出手順、審査対応について詳しく説明します。</p>`,
                        id: 'building-permit'
                    },
                    '長期優良住宅認定申請': {
                        title: '長期優良住宅認定申請',
                        content: `<h3 class="text-xl font-bold mb-4">長期優良住宅認定申請</h3>
                            <p class="text-gray-700">長期優良住宅の認定基準と申請手続き、必要書類について説明します。</p>`,
                        id: 'long-life-housing'
                    },
                    '住宅性能評価申請': {
                        title: '住宅性能評価申請',
                        content: `<h3 class="text-xl font-bold mb-4">住宅性能評価申請</h3>
                            <p class="text-gray-700">住宅性能評価の申請方法と評価基準、取得のメリットについて説明します。</p>`,
                        id: 'performance-evaluation'
                    },
                    '各種検査・完了検査対応': {
                        title: '各種検査・完了検査対応',
                        content: `<h3 class="text-xl font-bold mb-4">各種検査・完了検査対応</h3>
                            <p class="text-gray-700">中間検査、完了検査の準備と対応方法について詳しく説明します。</p>`,
                        id: 'inspection-procedures'
                    },
                    // 営業ルールのサブ項目
                    '標準価格の適用範囲': {
                        title: '標準価格の適用範囲',
                        content: `<h3 class="text-xl font-bold mb-4">標準価格の適用範囲</h3>
                            <p class="text-gray-700">標準価格に含まれる内容と、別途費用が必要な項目について説明します。</p>`,
                        id: 'standard-pricing'
                    },
                    'オプション価格設定基準': {
                        title: 'オプション価格設定基準',
                        content: `<h3 class="text-xl font-bold mb-4">オプション価格設定基準</h3>
                            <p class="text-gray-700">各種オプションの価格設定ルールと、見積もり作成の基準を説明します。</p>`,
                        id: 'option-pricing'
                    },
                    '値引き・割引の制限事項': {
                        title: '値引き・割引の制限事項',
                        content: `<h3 class="text-xl font-bold mb-4">値引き・割引の制限事項</h3>
                            <p class="text-gray-700">値引き・割引の上限と適用条件、承認手続きについて説明します。</p>`,
                        id: 'discount-restrictions'
                    },
                    '見積書作成の標準フォーマット': {
                        title: '見積書作成の標準フォーマット',
                        content: `<h3 class="text-xl font-bold mb-4">見積書作成の標準フォーマット</h3>
                            <p class="text-gray-700">見積書の記載事項と標準フォーマット、作成時の注意点を説明します。</p>`,
                        id: 'quotation-format'
                    },
                    '初回面談時の説明事項': {
                        title: '初回面談時の説明事項',
                        content: `<h3 class="text-xl font-bold mb-4">初回面談時の説明事項</h3>
                            <p class="text-gray-700">お客様への初回面談で必ず説明すべき項目とプレゼンテーション方法を説明します。</p>`,
                        id: 'initial-meeting'
                    },
                    '契約前の重要事項説明': {
                        title: '契約前の重要事項説明',
                        content: `<h3 class="text-xl font-bold mb-4">契約前の重要事項説明</h3>
                            <p class="text-gray-700">契約締結前に行う重要事項説明の内容と手順について説明します。</p>`,
                        id: 'important-matters'
                    },
                    'アフターサービス対応': {
                        title: 'アフターサービス対応',
                        content: `<h3 class="text-xl font-bold mb-4">アフターサービス対応</h3>
                            <p class="text-gray-700">引渡し後のアフターサービス体制と対応手順について説明します。</p>`,
                        id: 'after-service'
                    },
                    'クレーム対応フロー': {
                        title: 'クレーム対応フロー',
                        content: `<h3 class="text-xl font-bold mb-4">クレーム対応フロー</h3>
                            <p class="text-gray-700">お客様からのクレーム・苦情への対応手順と解決方法について説明します。</p>`,
                        id: 'complaint-handling'
                    },
                    'LIFE Xブランドガイドライン': {
                        title: 'LIFE Xブランドガイドライン',
                        content: `<h3 class="text-xl font-bold mb-4">LIFE Xブランドガイドライン</h3>
                            <p class="text-gray-700">ロゴ使用規定、ブランドカラー、広告物のデザイン基準について説明します。</p>`,
                        id: 'brand-guidelines'
                    },
                    '広告表現の制限事項': {
                        title: '広告表現の制限事項',
                        content: `<h3 class="text-xl font-bold mb-4">広告表現の制限事項</h3>
                            <p class="text-gray-700">広告・宣伝における表現規制と、使用禁止事項について説明します。</p>`,
                        id: 'advertising-restrictions'
                    },
                    'SNS・Web広告の運用基準': {
                        title: 'SNS・Web広告の運用基準',
                        content: `<h3 class="text-xl font-bold mb-4">SNS・Web広告の運用基準</h3>
                            <p class="text-gray-700">SNSやWeb広告での情報発信ルールと運用ガイドラインを説明します。</p>`,
                        id: 'social-media-guidelines'
                    },
                    'チラシ・パンフレットの作成基準': {
                        title: 'チラシ・パンフレットの作成基準',
                        content: `<h3 class="text-xl font-bold mb-4">チラシ・パンフレットの作成基準</h3>
                            <p class="text-gray-700">販促物の作成基準とデザインテンプレートの使用方法を説明します。</p>`,
                        id: 'brochure-standards'
                    },
                    '契約書類の作成・管理': {
                        title: '契約書類の作成・管理',
                        content: `<h3 class="text-xl font-bold mb-4">契約書類の作成・管理</h3>
                            <p class="text-gray-700">契約書類の作成手順と管理方法、保管期限について説明します。</p>`,
                        id: 'contract-management'
                    },
                    '工事請負契約の締結手順': {
                        title: '工事請負契約の締結手順',
                        content: `<h3 class="text-xl font-bold mb-4">工事請負契約の締結手順</h3>
                            <p class="text-gray-700">工事請負契約の締結プロセスと必要書類について説明します。</p>`,
                        id: 'construction-contract'
                    },
                    '変更契約の取り扱い': {
                        title: '変更契約の取り扱い',
                        content: `<h3 class="text-xl font-bold mb-4">変更契約の取り扱い</h3>
                            <p class="text-gray-700">工事内容変更時の契約変更手続きと注意点について説明します。</p>`,
                        id: 'change-orders'
                    },
                    '支払い条件・タイミング': {
                        title: '支払い条件・タイミング',
                        content: `<h3 class="text-xl font-bold mb-4">支払い条件・タイミング</h3>
                            <p class="text-gray-700">着手金、中間金、最終金の支払いタイミングと条件について説明します。</p>`,
                        id: 'payment-terms'
                    },
                    // 施工ルールのサブ項目
                    '各工程の品質チェックポイント': {
                        title: '各工程の品質チェックポイント',
                        content: `<h3 class="text-xl font-bold mb-4">各工程の品質チェックポイント</h3>
                            <p class="text-gray-700">基礎、躯体、仕上げ各工程での品質確認項目とチェック方法を説明します。</p>`,
                        id: 'quality-checkpoints'
                    },
                    '使用材料の品質管理': {
                        title: '使用材料の品質管理',
                        content: `<h3 class="text-xl font-bold mb-4">使用材料の品質管理</h3>
                            <p class="text-gray-700">使用材料の品質基準と、搬入時の確認方法について説明します。</p>`,
                        id: 'material-quality'
                    },
                    '施工精度の許容範囲': {
                        title: '施工精度の許容範囲',
                        content: `<h3 class="text-xl font-bold mb-4">施工精度の許容範囲</h3>
                            <p class="text-gray-700">各部位の施工精度基準と許容誤差について説明します。</p>`,
                        id: 'construction-tolerance'
                    },
                    '完了検査前の自主検査': {
                        title: '完了検査前の自主検査',
                        content: `<h3 class="text-xl font-bold mb-4">完了検査前の自主検査</h3>
                            <p class="text-gray-700">完了検査前に実施する自主検査の項目とチェックリストを説明します。</p>`,
                        id: 'self-inspection'
                    },
                    '標準工程表の遵守': {
                        title: '標準工程表の遵守',
                        content: `<h3 class="text-xl font-bold mb-4">標準工程表の遵守</h3>
                            <p class="text-gray-700">標準工程表に基づいた施工管理と進捗管理の方法を説明します。</p>`,
                        id: 'schedule-compliance'
                    },
                    '工程遅延時の対応手順': {
                        title: '工程遅延時の対応手順',
                        content: `<h3 class="text-xl font-bold mb-4">工程遅延時の対応手順</h3>
                            <p class="text-gray-700">工程遅延が発生した場合の報告・対応手順について説明します。</p>`,
                        id: 'delay-procedures'
                    },
                    '雨天・悪天候時の作業基準': {
                        title: '雨天・悪天候時の作業基準',
                        content: `<h3 class="text-xl font-bold mb-4">雨天・悪天候時の作業基準</h3>
                            <p class="text-gray-700">天候不良時の作業中止基準と養生方法について説明します。</p>`,
                        id: 'weather-guidelines'
                    },
                    '近隣への配慮事項': {
                        title: '近隣への配慮事項',
                        content: `<h3 class="text-xl font-bold mb-4">近隣への配慮事項</h3>
                            <p class="text-gray-700">工事中の騒音・振動対策、近隣挨拶の実施方法について説明します。</p>`,
                        id: 'neighbor-consideration'
                    },
                    '現場の整理整頓・5S活動': {
                        title: '現場の整理整頓・5S活動',
                        content: `<h3 class="text-xl font-bold mb-4">現場の整理整頓・5S活動</h3>
                            <p class="text-gray-700">現場の5S活動（整理・整頓・清掃・清潔・躾）の実施方法を説明します。</p>`,
                        id: 'site-organization'
                    },
                    '安全管理・事故防止対策': {
                        title: '安全管理・事故防止対策',
                        content: `<h3 class="text-xl font-bold mb-4">安全管理・事故防止対策</h3>
                            <p class="text-gray-700">労働安全衛生法に基づく安全管理と事故防止対策について説明します。</p>`,
                        id: 'safety-management'
                    },
                    '廃棄物処理・環境対策': {
                        title: '廃棄物処理・環境対策',
                        content: `<h3 class="text-xl font-bold mb-4">廃棄物処理・環境対策</h3>
                            <p class="text-gray-700">建設廃棄物の適正処理とリサイクル、環境保護対策について説明します。</p>`,
                        id: 'waste-management'
                    },
                    '職人・作業員の管理': {
                        title: '職人・作業員の管理',
                        content: `<h3 class="text-xl font-bold mb-4">職人・作業員の管理</h3>
                            <p class="text-gray-700">協力業者・職人の管理方法と作業指示の方法について説明します。</p>`,
                        id: 'worker-management'
                    },
                    '各種検査の実施・記録': {
                        title: '各種検査の実施・記録',
                        content: `<h3 class="text-xl font-bold mb-4">各種検査の実施・記録</h3>
                            <p class="text-gray-700">配筋検査、中間検査等の実施方法と記録保管について説明します。</p>`,
                        id: 'inspection-records'
                    },
                    '施工写真の撮影・管理': {
                        title: '施工写真の撮影・管理',
                        content: `<h3 class="text-xl font-bold mb-4">施工写真の撮影・管理</h3>
                            <p class="text-gray-700">工事写真の撮影ポイントと管理方法について説明します。</p>`,
                        id: 'photo-management'
                    },
                    '品質管理書類の作成': {
                        title: '品質管理書類の作成',
                        content: `<h3 class="text-xl font-bold mb-4">品質管理書類の作成</h3>
                            <p class="text-gray-700">品質管理に必要な書類の作成方法と保管期限について説明します。</p>`,
                        id: 'quality-documentation'
                    },
                    'お客様への工程報告': {
                        title: 'お客様への工程報告',
                        content: `<h3 class="text-xl font-bold mb-4">お客様への工程報告</h3>
                            <p class="text-gray-700">お客様への定期的な工程報告の方法とタイミングについて説明します。</p>`,
                        id: 'progress-reporting'
                    },
                    // 品質管理・アフターサービスのサブ項目
                    '第三者検査機関の活用': {
                        title: '第三者検査機関の活用',
                        content: `<h3 class="text-xl font-bold mb-4">第三者検査機関の活用</h3>
                            <p class="text-gray-700">第三者検査機関による検査の実施方法と対応について説明します。</p>`,
                        id: 'third-party-inspection'
                    },
                    '内部監査の実施': {
                        title: '内部監査の実施',
                        content: `<h3 class="text-xl font-bold mb-4">内部監査の実施</h3>
                            <p class="text-gray-700">社内品質監査の実施方法と改善活動について説明します。</p>`,
                        id: 'internal-audit'
                    },
                    '品質向上のための改善活動': {
                        title: '品質向上のための改善活動',
                        content: `<h3 class="text-xl font-bold mb-4">品質向上のための改善活動</h3>
                            <p class="text-gray-700">PDCAサイクルに基づく継続的な品質改善活動について説明します。</p>`,
                        id: 'quality-improvement'
                    },
                    '不具合発生時の対応体制': {
                        title: '不具合発生時の対応体制',
                        content: `<h3 class="text-xl font-bold mb-4">不具合発生時の対応体制</h3>
                            <p class="text-gray-700">不具合発生時の報告・対応体制と再発防止策について説明します。</p>`,
                        id: 'defect-response'
                    },
                    '引渡し後の定期点検': {
                        title: '引渡し後の定期点検',
                        content: `<h3 class="text-xl font-bold mb-4">引渡し後の定期点検</h3>
                            <p class="text-gray-700">1年、2年、5年、10年点検の実施内容と手順について説明します。</p>`,
                        id: 'periodic-inspection'
                    },
                    '保証対応・メンテナンス': {
                        title: '保証対応・メンテナンス',
                        content: `<h3 class="text-xl font-bold mb-4">保証対応・メンテナンス</h3>
                            <p class="text-gray-700">保証内容と保証期間、メンテナンス対応について説明します。</p>`,
                        id: 'warranty-maintenance'
                    },
                    'お客様相談窓口の運営': {
                        title: 'お客様相談窓口の運営',
                        content: `<h3 class="text-xl font-bold mb-4">お客様相談窓口の運営</h3>
                            <p class="text-gray-700">お客様相談窓口の運営体制と対応方法について説明します。</p>`,
                        id: 'customer-support'
                    },
                    '緊急時対応体制': {
                        title: '緊急時対応体制',
                        content: `<h3 class="text-xl font-bold mb-4">緊急時対応体制</h3>
                            <p class="text-gray-700">緊急時の連絡体制と対応手順について説明します。</p>`,
                        id: 'emergency-response'
                    },
                    // 構造設計基準の追加項目
                    '建築基準法に準拠した構造計算': {
                        title: '建築基準法に準拠した構造計算',
                        content: `<h3 class="text-xl font-bold mb-4">建築基準法に準拠した構造計算</h3>
                            <p class="text-gray-700">全ての構造計算は最新の建築基準法に準拠。許容応力度計算、地震力の算定、風荷重・積雪荷重の考慮など、安全性を第一に設計します。</p>`,
                        id: 'building-code-compliance'
                    },
                    '耐震等級3の確保': {
                        title: '耐震等級3の確保',
                        content: `<h3 class="text-xl font-bold mb-4">耐震等級3の確保</h3>
                            <p class="text-gray-700">住宅性能表示制度における最高等級の耐震性能を確保。建築基準法の1.5倍の地震力に耐える構造で、お客様の安全を守ります。</p>`,
                        id: 'seismic-grade-3'
                    },
                    '基礎設計の標準仕様遵守': {
                        title: '基礎設計の標準仕様遵守',
                        content: `<h3 class="text-xl font-bold mb-4">基礎設計の標準仕様遵守</h3>
                            <p class="text-gray-700">地盤調査結果に基づき適切な基礎形式を選定。ベタ基礎を標準とし、地耐力30kN/㎡以上を確保します。</p>`,
                        id: 'foundation-standards'
                    },
                    '構造材の品質管理基準': {
                        title: '構造材の品質管理基準',
                        content: `<h3 class="text-xl font-bold mb-4">構造材の品質管理基準</h3>
                            <p class="text-gray-700">JAS規格適合材の使用、含水率15%以下の管理、プレカット精度の確保など、構造材の品質を厳格に管理します。</p>`,
                        id: 'structural-material-quality'
                    },
                    '設備設計基準': {
                        title: '設備設計基準の詳細',
                        content: `<h3 class="text-xl font-bold mb-4">設備設計基準の詳細</h3>
                            <p class="text-gray-700">電気・給排水・空調など、快適な住環境を実現する設備設計の基準を定めています。省エネ性能と利便性を両立します。</p>`,
                        id: 'equipment-design-standards'
                    },
                    '申請・手続き': {
                        title: '申請・手続きの詳細',
                        content: `<h3 class="text-xl font-bold mb-4">申請・手続きの詳細</h3>
                            <p class="text-gray-700">建築確認申請から各種認定申請まで、必要な手続きを適切に実施。法令遵守と手続きの迅速化を両立します。</p>`,
                        id: 'application-procedures'
                    }
                },

                init() {
                    console.log('Rules page initialized');
                },

                showDetail(type) {
                    this.selectedDetail = this.detailContents[type];
                    this.showDetailModal = true;
                },

                closeDetailModal() {
                    this.showDetailModal = false;
                    this.selectedDetail = null;
                },

                openAIModal() {
                    this.showAIModal = true;
                },

                closeAIModal() {
                    this.showAIModal = false;
                },

                async sendQuestion() {
                    if (!this.currentQuestion.trim() || this.isTyping) return;

                    const question = this.currentQuestion.trim();
                    const userMessage = {
                        id: Date.now(),
                        type: 'user',
                        content: question,
                        timestamp: new Date().toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' })
                    };

                    this.chatMessages.push(userMessage);
                    this.currentQuestion = '';
                    this.isTyping = true;

                    // Scroll to bottom
                    setTimeout(() => {
                        const chatArea = document.getElementById('chatArea');
                        chatArea.scrollTop = chatArea.scrollHeight;
                    }, 100);

                    // Simulate AI response
                    await this.generateAIResponse(question);
                },

                async generateAIResponse(question) {
                    // Simple AI response simulation based on keywords
                    let response = '';
                    
                    const lowerQuestion = question.toLowerCase();
                    
                    if (lowerQuestion.includes('価格') || lowerQuestion.includes('料金') || lowerQuestion.includes('費用')) {
                        response = 'LIFE Xの価格については、標準価格表に基づいて見積もりを作成いたします。詳細な価格情報は営業担当者にお問い合わせください。オプション追加の場合は別途料金が発生いたします。';
                    } else if (lowerQuestion.includes('耐震') || lowerQuestion.includes('地震')) {
                        response = 'LIFE Xでは耐震等級3を標準仕様として、建築基準法の1.5倍の地震力に耐える構造を実現しています。極めて稀な地震でも倒壊・崩壊しない安全な住宅をご提供いたします。';
                    } else if (lowerQuestion.includes('工期') || lowerQuestion.includes('期間')) {
                        response = 'LIFE Xの標準的な工事期間は約4〜5ヶ月です。基礎工事約1ヶ月、躯体工事約1ヶ月、内外装工事約1.5ヶ月、設備工事・完了検査約0.5ヶ月となります。';
                    } else if (lowerQuestion.includes('保証') || lowerQuestion.includes('アフター')) {
                        response = 'LIFE Xでは充実した保証体制を整えています。構造躯体・防水は10年保証、設備機器はメーカー保証に準じます。また、1年、2年、5年、10年の定期点検も実施いたします。';
                    } else if (lowerQuestion.includes('変更') || lowerQuestion.includes('カスタマイズ')) {
                        response = '標準プランは一定の範囲内でカスタマイズが可能です。内装カラーバリエーション、設備のグレードアップ、オプションの追加などが変更できます。構造に関わる変更は制限がございます。';
                    } else if (lowerQuestion.includes('営業') || lowerQuestion.includes('エリア')) {
                        response = '営業エリアは加盟契約時に定められた地域内での活動が基本となります。隣接エリアでの営業をご希望の場合は、事前にご相談ください。';
                    } else {
                        response = 'ご質問ありがとうございます。より詳しい情報については、LIFE X加盟店専用サイトの各種ルールやダウンロード資料をご確認いただくか、直接お問い合わせください。';
                    }

                    // Simulate typing delay
                    await new Promise(resolve => setTimeout(resolve, 1500));

                    const aiMessage = {
                        id: Date.now(),
                        type: 'ai',
                        content: response,
                        timestamp: new Date().toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' })
                    };

                    this.isTyping = false;
                    this.chatMessages.push(aiMessage);

                    // Scroll to bottom
                    setTimeout(() => {
                        const chatArea = document.getElementById('chatArea');
                        chatArea.scrollTop = chatArea.scrollHeight;
                    }, 100);
                },

                downloadPDF(id) {
                    // Download functionality
                    const link = document.createElement('a');
                    link.href = `/static/docs/rules/${id}.pdf`;
                    link.download = `${id}.pdf`;
                    link.click();
                    
                    // Show notification
                    alert('PDFをダウンロードしました');
                }
            }
        }
    </script>
    
    <!-- Maintenance Button - Fixed Top Right -->
    <div class="fixed top-4 right-4 z-50">
        <button onclick="window.location.href='/admin.html'" 
                class="bg-white text-gray-400 p-2 rounded-lg shadow-sm hover:bg-gray-50 hover:text-gray-600 transition-all duration-300 opacity-70 hover:opacity-100 border border-gray-200" 
                title="メンテナンス">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"></path>
            </svg>
        </button>
    </div>

<!-- AI Bot Component -->
<div x-data="aibotComponent()" x-init="init()" class="aibot-container">
    <!-- AI Bot Floating Button -->
    <div class="fixed bottom-6 right-6 z-50">
        <button @click="toggleChat()" 
                class="bg-gradient-to-r from-purple-500 to-purple-600 text-white p-4 rounded-full shadow-lg hover:from-purple-600 hover:to-purple-700 transition-all duration-300 group" 
                title="AIサポート">
            <svg x-show="!chatOpen" class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                <path d="M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z" />
                <path d="M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z" />
            </svg>
            <svg x-show="chatOpen" class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
        </button>
    </div>

    <!-- AI Chat Window -->
    <div x-show="chatOpen" 
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 transform translate-y-4"
         x-transition:enter-end="opacity-100 transform translate-y-0"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="opacity-100 transform translate-y-0"
         x-transition:leave-end="opacity-0 transform translate-y-4"
         class="fixed bottom-24 right-6 w-96 max-w-full bg-white rounded-xl shadow-2xl z-50"
         style="display: none;">
        
        <!-- Chat Header -->
        <div class="bg-gradient-to-r from-purple-500 to-purple-600 text-white p-4 rounded-t-xl">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
                        <span class="text-lg">🤖</span>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold">LIFE X AIサポート</h3>
                        <p class="text-xs text-white/80">ご質問をどうぞ</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat Messages -->
        <div class="h-96 overflow-y-auto p-4 bg-gray-50" id="aibotChatArea">
            <!-- Welcome Message -->
            <div class="mb-4">
                <div class="flex items-start space-x-3">
                    <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center flex-shrink-0">
                        <span class="text-white text-sm">AI</span>
                    </div>
                    <div class="bg-white p-3 rounded-lg shadow-sm max-w-xs">
                        <p class="text-gray-700 text-sm">こんにちは！LIFE Xについて何でもお気軽にご質問ください。</p>
                    </div>
                </div>
            </div>

            <!-- Dynamic Messages -->
            <template x-for="message in messages" :key="message.id">
                <div class="mb-4">
                    <div class="flex items-start space-x-3" :class="message.type === 'user' ? 'flex-row-reverse space-x-reverse' : ''">
                        <div class="w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0" 
                             :class="message.type === 'user' ? 'bg-blue-500' : 'bg-purple-500'">
                            <span class="text-white text-sm" x-text="message.type === 'user' ? 'You' : 'AI'"></span>
                        </div>
                        <div class="p-3 rounded-lg shadow-sm max-w-xs" 
                             :class="message.type === 'user' ? 'bg-blue-100' : 'bg-white'">
                            <p class="text-gray-700 text-sm" x-html="message.content"></p>
                            <p class="text-xs text-gray-500 mt-1" x-text="message.timestamp"></p>
                        </div>
                    </div>
                </div>
            </template>

            <!-- Typing Indicator -->
            <div x-show="isTyping" class="mb-4">
                <div class="flex items-start space-x-3">
                    <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center flex-shrink-0">
                        <span class="text-white text-sm">AI</span>
                    </div>
                    <div class="bg-white p-3 rounded-lg shadow-sm">
                        <div class="flex space-x-1">
                            <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
                            <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                            <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Input Area -->
        <div class="p-4 border-t border-gray-200">
            <div class="flex space-x-2">
                <input type="text" 
                       x-model="currentMessage" 
                       @keydown.enter="sendMessage()"
                       placeholder="メッセージを入力..."
                       class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm">
                <button @click="sendMessage()" 
                        :disabled="!currentMessage.trim() || isTyping"
                        class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 focus:ring-2 focus:ring-purple-500 disabled:bg-gray-400 disabled:cursor-not-allowed text-sm">
                    送信
                </button>
            </div>
        </div>
    </div>
</div>

<script>
function aibotComponent() {
    return {
        chatOpen: false,
        messages: [],
        currentMessage: '',
        isTyping: false,

        init() {
            // 初期化処理
        },

        toggleChat() {
            this.chatOpen = !this.chatOpen;
            if (this.chatOpen) {
                setTimeout(() => {
                    const chatArea = document.getElementById('aibotChatArea');
                    if (chatArea) chatArea.scrollTop = chatArea.scrollHeight;
                }, 100);
            }
        },

        async sendMessage() {
            if (!this.currentMessage.trim() || this.isTyping) return;

            const message = this.currentMessage.trim();
            const userMessage = {
                id: Date.now(),
                type: 'user',
                content: message,
                timestamp: new Date().toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' })
            };

            this.messages.push(userMessage);
            this.currentMessage = '';
            this.isTyping = true;

            // Scroll to bottom
            setTimeout(() => {
                const chatArea = document.getElementById('aibotChatArea');
                if (chatArea) chatArea.scrollTop = chatArea.scrollHeight;
            }, 100);

            // Generate AI response
            await this.generateResponse(message);
        },

        async generateResponse(question) {
            // AI応答のシミュレーション
            let response = '';
            const lowerQuestion = question.toLowerCase();
            
            if (lowerQuestion.includes('価格') || lowerQuestion.includes('料金') || lowerQuestion.includes('費用')) {
                response = 'LIFE Xの価格については、標準価格表に基づいて見積もりを作成いたします。詳細は営業担当者にお問い合わせください。';
            } else if (lowerQuestion.includes('プラン')) {
                response = 'LIFE Xでは30坪から35坪まで様々なプランをご用意しています。プラン一覧ページでご確認いただけます。';
            } else if (lowerQuestion.includes('耐震') || lowerQuestion.includes('地震')) {
                response = 'LIFE Xでは耐震等級3を標準仕様としています。建築基準法の1.5倍の地震力に耐える構造です。';
            } else if (lowerQuestion.includes('工期') || lowerQuestion.includes('期間')) {
                response = '標準的な工事期間は約4〜5ヶ月です。詳細な工程表は契約時にご説明いたします。';
            } else if (lowerQuestion.includes('保証')) {
                response = '構造躯体・防水は10年保証、設備機器はメーカー保証に準じます。定期点検も実施いたします。';
            } else if (lowerQuestion.includes('ダウンロード')) {
                response = 'ダウンロードページから各種資料をダウンロードいただけます。パンフレット、資金計画書、標準仕様書などがございます。';
            } else if (lowerQuestion.includes('間取') || lowerQuestion.includes('マトリックス')) {
                response = '間取マトリックスページでは、建物間口と奥行の組み合わせから最適なプランを検索できます。';
            } else if (lowerQuestion.includes('ルール') || lowerQuestion.includes('規定')) {
                response = 'LIFE Xのルール・ガイドラインは本ページで詳しくご確認いただけます。営業・設計・施工・品質管理の各ルールを遵守してください。';
            } else {
                response = 'ご質問ありがとうございます。詳しい情報はメニューから各ページをご確認いただくか、お問い合わせください。';
            }

            // タイピング遅延のシミュレーション
            await new Promise(resolve => setTimeout(resolve, 1000));

            const aiMessage = {
                id: Date.now(),
                type: 'ai',
                content: response,
                timestamp: new Date().toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' })
            };

            this.isTyping = false;
            this.messages.push(aiMessage);

            // Scroll to bottom
            setTimeout(() => {
                const chatArea = document.getElementById('aibotChatArea');
                if (chatArea) chatArea.scrollTop = chatArea.scrollHeight;
            }, 100);
        }
    }
}
</script>
</body>
</html>