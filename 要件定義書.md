# LIFE X åŠ ç›Ÿåº—å°‚ç”¨ã‚µã‚¤ãƒˆ è¦ä»¶å®šç¾©æ›¸

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.0
**æœ€çµ‚æ›´æ–°**: 2025-01-23
**ä½œæˆè€…**: é–‹ç™ºãƒãƒ¼ãƒ 

---

## ğŸ“‹ ç›®æ¬¡

1. [ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦](#ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦)
2. [å…¨ãƒšãƒ¼ã‚¸ä¸€è¦§ã¨ä»•æ§˜](#å…¨ãƒšãƒ¼ã‚¸ä¸€è¦§ã¨ä»•æ§˜)
3. [æŠ€è¡“è¦ä»¶](#æŠ€è¡“è¦ä»¶)
4. [ç’°å¢ƒå¤‰æ•°ç®¡ç†](#ç’°å¢ƒå¤‰æ•°ç®¡ç†)
5. [ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè¦ä»¶](#ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè¦ä»¶)
6. [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶](#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶)
7. [ãƒ†ã‚¹ãƒˆè¦ä»¶](#ãƒ†ã‚¹ãƒˆè¦ä»¶)
8. [é‹ç”¨è¦ä»¶](#é‹ç”¨è¦ä»¶)
9. [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

---

## ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### ç›®çš„
Gãƒã‚¦ã‚¹è¦æ ¼ä½å®…ã€ŒLIFE Xã€ã®åŠ ç›Ÿåº—å‘ã‘å°‚ç”¨ãƒãƒ¼ã‚¿ãƒ«ã‚µã‚¤ãƒˆã€‚ãƒ—ãƒ©ãƒ³æƒ…å ±ã€è¨­è¨ˆè³‡æ–™ã€å–¶æ¥­ãƒ„ãƒ¼ãƒ«ã‚’åŠ¹ç‡çš„ã«ç®¡ç†ãƒ»é…ä¿¡ã™ã‚‹ã€‚

### ä¸»è¦æ©Ÿèƒ½
- é–“å–ãƒãƒˆãƒªãƒƒã‚¯ã‚¹æ¤œç´¢
- ãƒ—ãƒ©ãƒ³ä¸€è¦§ãƒ»è©³ç´°è¡¨ç¤º
- FAQç®¡ç†
- ãƒ«ãƒ¼ãƒ«ç®¡ç†
- ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚»ãƒ³ã‚¿ãƒ¼
- ç®¡ç†ç”»é¢

---

## å…¨ãƒšãƒ¼ã‚¸ä¸€è¦§ã¨ä»•æ§˜

### å…¬é–‹ãƒšãƒ¼ã‚¸ï¼ˆå…¨6ãƒšãƒ¼ã‚¸ï¼‰

| No. | ãƒ•ã‚¡ã‚¤ãƒ«å | ãƒšãƒ¼ã‚¸å | ä¸»è¦æ©Ÿèƒ½ | ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ | çŠ¶æ…‹ |
|-----|-----------|---------|---------|------------|------|
| 1 | `index.html` | ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ | ã‚µã‚¤ãƒˆæ¦‚è¦ã€ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ | - | âœ… æ­£å¸¸ |
| 2 | `plans.html` | ãƒ—ãƒ©ãƒ³ä¸€è¦§ | ãƒ—ãƒ©ãƒ³æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ»ä¸€è¦§è¡¨ç¤º | Supabase (plans) | âœ… æ­£å¸¸ |
| 3 | `plan-detail.html` | ãƒ—ãƒ©ãƒ³è©³ç´° | å€‹åˆ¥ãƒ—ãƒ©ãƒ³è©³ç´°è¡¨ç¤º | Supabase (plans) | âœ… æ­£å¸¸ |
| 4 | `matrix.html` | é–“å–ãƒãƒˆãƒªãƒƒã‚¯ã‚¹ | åªæ•°Ã—å¥¥è¡Œ/é–“å£ã§ã®æ¤œç´¢ | Supabase (plans) | âœ… æ­£å¸¸ |
| 5 | `rules.html` | ãƒ«ãƒ¼ãƒ«ä¸€è¦§ | å–¶æ¥­ãƒ»æ–½å·¥ãƒ«ãƒ¼ãƒ«è¡¨ç¤º | Supabase (rules, rule_categories) | âœ… æ­£å¸¸ |
| 6 | `faq.html` | FAQ | ã‚ˆãã‚ã‚‹è³ªå•ã¨å›ç­” | Supabase (faqs, faq_categories) | âœ… æ­£å¸¸ |
| 7 | `downloads.html` | ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ | è³‡æ–™ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ | Supabase (downloads, download_categories) | âš ï¸ æœªå®Ÿè£… |
| 8 | `design.html` | ãƒ‡ã‚¶ã‚¤ãƒ³ | ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ | - | âœ… æ­£å¸¸ |
| 9 | `ai.html` | AIæ©Ÿèƒ½ | AIé–¢é€£æ©Ÿèƒ½ | - | âš ï¸ é–‹ç™ºä¸­ |

### ç®¡ç†ãƒšãƒ¼ã‚¸ï¼ˆå…¨13ãƒšãƒ¼ã‚¸ï¼‰

| No. | ãƒ•ã‚¡ã‚¤ãƒ«å | ãƒšãƒ¼ã‚¸å | ä¸»è¦æ©Ÿèƒ½ | èªè¨¼ | çŠ¶æ…‹ |
|-----|-----------|---------|---------|------|------|
| 10 | `admin-login.html` | ãƒ­ã‚°ã‚¤ãƒ³ | ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³ | ä¸è¦ | âœ… æ­£å¸¸ |
| 11 | `admin-login-google.html` | Googleãƒ­ã‚°ã‚¤ãƒ³ | Google OAuthèªè¨¼ | ä¸è¦ | âœ… æ­£å¸¸ |
| 12 | `admin.html` | ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ | çµ±è¨ˆãƒ»æ¦‚è¦è¡¨ç¤º | å¿…é ˆ | âœ… æ­£å¸¸ |
| 13 | `admin-plans.html` | ãƒ—ãƒ©ãƒ³ç®¡ç† | ãƒ—ãƒ©ãƒ³ç·¨é›†ãƒ»ç®¡ç† | å¿…é ˆ | âœ… æ­£å¸¸ |
| 14 | `admin-plans-manager.html` | ãƒ—ãƒ©ãƒ³ç®¡ç†ï¼ˆæ—§ï¼‰ | ãƒ¬ã‚¬ã‚·ãƒ¼ | å¿…é ˆ | âš ï¸ éæ¨å¥¨ |
| 15 | `admin-plans-new.html` | ãƒ—ãƒ©ãƒ³æ–°è¦è¿½åŠ  | æ–°è¦ãƒ—ãƒ©ãƒ³ä½œæˆ | å¿…é ˆ | âœ… æ­£å¸¸ |
| 16 | `admin-rules.html` | ãƒ«ãƒ¼ãƒ«ç®¡ç† | ãƒ«ãƒ¼ãƒ«ç·¨é›†ãƒ»ç®¡ç† | å¿…é ˆ | âœ… æ­£å¸¸ |
| 17 | `admin-faq.html` | FAQç®¡ç† | FAQç·¨é›†ãƒ»ç®¡ç† | å¿…é ˆ | âœ… æ­£å¸¸ |
| 18 | `admin-downloads.html` | ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ç®¡ç† | è³‡æ–™ç®¡ç† | å¿…é ˆ | âš ï¸ æœªå®Ÿè£… |
| 19 | `admin-users.html` | ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç† | ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç† | ç®¡ç†è€… | âœ… æ­£å¸¸ |
| 20 | `admin-profile.html` | ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« | ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®š | å¿…é ˆ | âœ… æ­£å¸¸ |
| 21 | `admin-notifications.html` | é€šçŸ¥ç®¡ç† | ã‚·ã‚¹ãƒ†ãƒ é€šçŸ¥ | å¿…é ˆ | âœ… æ­£å¸¸ |
| 22 | `admin-system.html` | ã‚·ã‚¹ãƒ†ãƒ è¨­å®š | å…¨ä½“è¨­å®š | ç®¡ç†è€… | âœ… æ­£å¸¸ |

### ãã®ä»–ãƒšãƒ¼ã‚¸ï¼ˆå…¨4ãƒšãƒ¼ã‚¸ï¼‰

| No. | ãƒ•ã‚¡ã‚¤ãƒ«å | ãƒšãƒ¼ã‚¸å | ç”¨é€” | çŠ¶æ…‹ |
|-----|-----------|---------|------|------|
| 23 | `plans-simple.html` | ãƒ—ãƒ©ãƒ³ä¸€è¦§ï¼ˆç°¡æ˜“ç‰ˆï¼‰ | è»½é‡ç‰ˆ | âœ… æ­£å¸¸ |
| 24 | `rules-modal.html` | ãƒ«ãƒ¼ãƒ«ãƒ¢ãƒ¼ãƒ€ãƒ« | ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º | âœ… æ­£å¸¸ |
| 25 | `downloads-modal.html` | ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ¢ãƒ¼ãƒ€ãƒ« | ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º | âœ… æ­£å¸¸ |
| 26 | `test-modal.html` | ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ€ãƒ« | é–‹ç™ºç”¨ | ğŸ”§ é–‹ç™ºç”¨ |

**åˆè¨ˆ**: 26ãƒšãƒ¼ã‚¸

---

## æŠ€è¡“è¦ä»¶

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

#### å¿…é ˆæŠ€è¡“
- **HTML5** - ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—
- **CSS3** + **Tailwind CSS 3.x** - ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
- **JavaScript (ES6+)** - Vanilla JSä½¿ç”¨
- **Alpine.js 3.x** - ãƒªã‚¢ã‚¯ãƒ†ã‚£ãƒ–UI
- **Vite 5.x** - ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«

#### å¯¾å¿œãƒ–ãƒ©ã‚¦ã‚¶
- Chrome æœ€æ–°ç‰ˆ
- Firefox æœ€æ–°ç‰ˆ
- Safari æœ€æ–°ç‰ˆ
- Edge æœ€æ–°ç‰ˆ
- ãƒ¢ãƒã‚¤ãƒ«ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆiOS Safari, Chrome Mobileï¼‰

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- **Supabase (PostgreSQL 15)**
  - ãƒ—ãƒ©ãƒ³: Proãƒ—ãƒ©ãƒ³
  - ãƒªãƒ¼ã‚¸ãƒ§ãƒ³: ap-northeast-1 (æ±äº¬)
  - æ¥ç¶šæƒ…å ±:
    - URL: `https://hegpxvyziovlfxdfsrsv.supabase.co`
    - ANON KEY: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhlZ3B4dnl6aW92bGZ4ZGZzcnN2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2Nzk5MjYsImV4cCI6MjA3NjI1NTkyNn0.uLCJvgKDOWpTxRjt39DVyqUotQcSam3v4lItofWeDws`

#### ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆ

| ãƒ†ãƒ¼ãƒ–ãƒ«å | ç”¨é€” | ä¸»è¦ã‚«ãƒ©ãƒ  | å…¬é–‹ã‚¢ã‚¯ã‚»ã‚¹ |
|-----------|------|-----------|------------|
| `plans` | ãƒ—ãƒ©ãƒ³æƒ…å ± | id, name, size, price, status | âœ… SELECT |
| `rules` | ãƒ«ãƒ¼ãƒ« | id, title, content, category_id, status | âœ… SELECT |
| `rule_categories` | ãƒ«ãƒ¼ãƒ«ã‚«ãƒ†ã‚´ãƒª | id, name, display_order | âœ… SELECT |
| `faqs` | FAQ | id, question, answer, category_id, status | âœ… SELECT |
| `faq_categories` | FAQã‚«ãƒ†ã‚´ãƒª | id, name, display_order | âœ… SELECT |
| `downloads` | ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰è³‡æ–™ | id, title, file_url, category_id | âš ï¸ æœªå®Ÿè£… |
| `download_categories` | ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã‚«ãƒ†ã‚´ãƒª | id, name, display_order | âš ï¸ æœªå®Ÿè£… |
| `user_profiles` | ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ± | id, email, company_name, role | âŒ èªè¨¼å¿…é ˆ |
| `login_history` | ãƒ­ã‚°ã‚¤ãƒ³å±¥æ­´ | id, user_id, login_at, status | âŒ èªè¨¼å¿…é ˆ |

### ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°
- **Vercel**
  - ãƒ—ãƒ©ãƒ³: Proãƒ—ãƒ©ãƒ³
  - è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤: main ãƒ–ãƒ©ãƒ³ãƒã¸ã®push
  - Previewç’°å¢ƒ: Pull Requestä½œæˆæ™‚
  - æœ¬ç•ªURL: https://lifex-btob.vercel.app

---

## ç’°å¢ƒå¤‰æ•°ç®¡ç†

### ğŸ”´ é‡è¦: ç’°å¢ƒå¤‰æ•°ã®ç¨®é¡ã¨æ‰±ã„

#### å…¬é–‹ã‚­ãƒ¼ï¼ˆPublic Keysï¼‰
**ç‰¹å¾´**: ã‚³ãƒ¼ãƒ‰ã«åŸ‹ã‚è¾¼ã¾ã‚Œã¦ã‚‚å•é¡Œãªã„ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§ä½¿ç”¨

| å¤‰æ•°å | å¿…é ˆ | ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ | ç”¨é€” |
|-------|------|--------------|------|
| `VITE_SUPABASE_URL` | âŒ | ã‚ã‚Š | Supabaseæ¥ç¶šURL |
| `VITE_SUPABASE_ANON_KEY` | âŒ | ã‚ã‚Š | SupabaseåŒ¿åã‚­ãƒ¼ |

**ã‚³ãƒ¼ãƒ‰ä¾‹**:
```javascript
// âœ… å…¬é–‹ã‚­ãƒ¼ã®æ­£ã—ã„å®Ÿè£…
const supabaseUrl = import.meta.env.VITE_SUPABASE_URL ||
    'https://hegpxvyziovlfxdfsrsv.supabase.co';
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY ||
    'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...';

// è­¦å‘Šã®ã¿ï¼ˆã‚¨ãƒ©ãƒ¼ã§ã¯ãªã„ï¼‰
if (!import.meta.env.VITE_SUPABASE_ANON_KEY) {
    console.warn('âš ï¸ ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤ã‚’ä½¿ç”¨');
}
```

#### ç§˜å¯†ã‚­ãƒ¼ï¼ˆSecret Keysï¼‰
**ç‰¹å¾´**: çµ¶å¯¾ã«ã‚³ãƒ¼ãƒ‰ã«åŸ‹ã‚è¾¼ã‚“ã§ã¯ã„ã‘ãªã„ã€ã‚µãƒ¼ãƒãƒ¼å´ã§ã®ã¿ä½¿ç”¨

| å¤‰æ•°å | å¿…é ˆ | ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ | ç”¨é€” |
|-------|------|--------------|------|
| `SUPABASE_SERVICE_ROLE_KEY` | âœ… | ãªã— | ç®¡ç†æ“ä½œç”¨ |
| `VITE_SERVICE_ROLE_KEY` | âœ… | ãªã— | ã‚µãƒ¼ãƒãƒ¼æ©Ÿèƒ½ç”¨ |

**ã‚³ãƒ¼ãƒ‰ä¾‹**:
```javascript
// âœ… ç§˜å¯†ã‚­ãƒ¼ã®æ­£ã—ã„å®Ÿè£…
const serviceKey = import.meta.env.VITE_SERVICE_ROLE_KEY;

if (!serviceKey) {
    throw new Error('SERVICE_ROLE_KEY is required!'); // ã‚¨ãƒ©ãƒ¼ã‚’ã‚¹ãƒ­ãƒ¼
}
```

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ

#### .env.localï¼ˆãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºå°‚ç”¨ï¼‰

```bash
# .env.localï¼ˆGitã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ï¼‰
VITE_SUPABASE_URL=https://hegpxvyziovlfxdfsrsv.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhlZ3B4dnl6aW92bGZ4ZGZzcnN2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA2Nzk5MjYsImV4cCI6MjA3NjI1NTkyNn0.uLCJvgKDOWpTxRjt39DVyqUotQcSam3v4lItofWeDws

# ç§˜å¯†ã‚­ãƒ¼ï¼ˆç®¡ç†æ©Ÿèƒ½ç”¨ï¼‰
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhlZ3B4dnl6aW92bGZ4ZGZzcnN2Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MDY3OTkyNiwiZXhwIjoyMDc2MjU1OTI2fQ.OYB1WmG_xWsAVJQZFQ4fToCR6AXcFYHYNH-1QDOS8uM
```

### Vercelæœ¬ç•ªç’°å¢ƒ

#### è¨­å®šæ‰‹é †

1. **Vercelãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹**
   - https://vercel.com ã«ãƒ­ã‚°ã‚¤ãƒ³
   - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€Œlifex-btobã€ã‚’é¸æŠ

2. **Settings â†’ Environment Variables**

3. **å…¬é–‹ã‚­ãƒ¼ã‚’è¿½åŠ ï¼ˆæ¨å¥¨ã€å¿…é ˆã§ã¯ãªã„ï¼‰**
   ```
   VITE_SUPABASE_URL=https://hegpxvyziovlfxdfsrsv.supabase.co
   VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
   ```
   - Environment: Production, Preview, Development å…¨ã¦ãƒã‚§ãƒƒã‚¯

4. **ç§˜å¯†ã‚­ãƒ¼ã‚’è¿½åŠ ï¼ˆç®¡ç†æ©Ÿèƒ½ç”¨ã€å¿…é ˆï¼‰**
   ```
   SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
   ```
   - Environment: Production ã®ã¿ãƒã‚§ãƒƒã‚¯

**æ³¨æ„**: å…¬é–‹ã‚­ãƒ¼ã¯ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤ãŒã‚ã‚‹ãŸã‚ã€è¨­å®šã—ãªãã¦ã‚‚å‹•ä½œã—ã¾ã™ã€‚ãŸã ã—ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ä¿å®ˆæ€§ã®ãŸã‚è¨­å®šã‚’æ¨å¥¨ã—ã¾ã™ã€‚

---

## ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè¦ä»¶

### ğŸš¨ é‡è¦: ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã§å­¦ã‚“ã æ•™è¨“

#### å•é¡Œã®çµŒç·¯
2025å¹´1æœˆ23æ—¥ã€Vercelæœ¬ç•ªç’°å¢ƒã§ãƒ‡ãƒ¼ã‚¿ãŒå…¨ãè¡¨ç¤ºã•ã‚Œãªã„å•é¡ŒãŒç™ºç”Ÿã€‚

**åŸå› **:
```javascript
// âŒ å•é¡Œã®ã‚ã£ãŸã‚³ãƒ¼ãƒ‰
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;
if (!supabaseAnonKey) {
    throw new Error('Supabase API key is not configured'); // â† ã“ã‚ŒãŒå•é¡Œ
}
```

- Vercelã«ç’°å¢ƒå¤‰æ•°ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„
- ãƒ“ãƒ«ãƒ‰æ™‚ã«`undefined`ã«ãªã‚‹
- ã‚¨ãƒ©ãƒ¼ãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã‚¢ãƒ—ãƒªå…¨ä½“ãŒå‹•ã‹ãªã„

**ä¿®æ­£å¾Œ**:
```javascript
// âœ… ä¿®æ­£ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY ||
    'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'; // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯

if (!import.meta.env.VITE_SUPABASE_ANON_KEY) {
    console.warn('âš ï¸ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤ã‚’ä½¿ç”¨'); // è­¦å‘Šã®ã¿
}
```

### ãƒ‡ãƒ—ãƒ­ã‚¤å‰å¿…é ˆãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

#### 1. ãƒ­ãƒ¼ã‚«ãƒ«ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ
```bash
# é€šå¸¸ãƒ“ãƒ«ãƒ‰
npm run build

# æˆåŠŸã™ã‚‹ã“ã¨ã‚’ç¢ºèª
âœ“ built in 2.5s
```

#### 2. ç’°å¢ƒå¤‰æ•°ãªã—ã§ã®ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ
```bash
# ä¸€æ™‚çš„ã«.env.localã‚’ãƒªãƒãƒ¼ãƒ 
mv .env.local .env.local.bak

# ãƒ“ãƒ«ãƒ‰
npm run build

# ã‚¨ãƒ©ãƒ¼ãŒå‡ºãªã„ã“ã¨ã‚’ç¢ºèª
âœ“ built in 2.5s

# å…ƒã«æˆ»ã™
mv .env.local.bak .env.local
```

#### 3. ãƒ“ãƒ«ãƒ‰å‡ºåŠ›ã®æ¤œè¨¼
```bash
# undefinedãŒå«ã¾ã‚Œã¦ã„ãªã„ã“ã¨ã‚’ç¢ºèª
grep -r "=void 0" dist/assets/supabase*.js
# â†’ ä½•ã‚‚è¡¨ç¤ºã•ã‚Œãªã‘ã‚Œã°OK

# ANON KEYãŒåŸ‹ã‚è¾¼ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
grep -r "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9" dist/assets/supabase*.js
# â†’ ãƒãƒƒãƒã™ã‚Œã°OK
```

#### 4. Vercelè¨­å®šç¢ºèª
- [ ] Environment Variables ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ï¼ˆæ¨å¥¨ï¼‰
- [ ] Production/Preview/Development å…¨ã¦ã«ãƒã‚§ãƒƒã‚¯

#### 5. ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œç¢ºèª
```bash
# æœ¬ç•ªURLã«ã‚¢ã‚¯ã‚»ã‚¹
curl https://lifex-btob.vercel.app/faq.html

# å„ãƒšãƒ¼ã‚¸ã§ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºã‚’ç¢ºèª
- [ ] plans.html - ãƒ—ãƒ©ãƒ³ä¸€è¦§è¡¨ç¤º
- [ ] rules.html - ãƒ«ãƒ¼ãƒ«ä¸€è¦§è¡¨ç¤º
- [ ] faq.html - FAQè¡¨ç¤º
```

#### 6. ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç¢ºèª
å„ãƒšãƒ¼ã‚¸ã§F12ã‚’æŠ¼ã—ã¦Consoleã‚¿ãƒ–ã‚’ç¢ºèª:
- âŒ "Supabase API key is not configured" ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨
- âœ… "âœ… Loaded FAQs from Supabase: X" ã®ã‚ˆã†ãªãƒ­ã‚°ãŒã‚ã‚‹ã“ã¨

### è‡ªå‹•åŒ–ãƒ„ãƒ¼ãƒ«

#### scripts/check-deployment.sh
```bash
#!/bin/bash

echo "ğŸ” ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆãƒã‚§ãƒƒã‚¯é–‹å§‹..."

# 1. ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ
npm run build || exit 1

# 2. ãƒ“ãƒ«ãƒ‰å‡ºåŠ›ãƒã‚§ãƒƒã‚¯
if grep -r "=void 0" dist/assets/supabase*.js; then
    echo "âŒ undefinedãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ"
    exit 1
fi

# 3. ANON KEYãƒã‚§ãƒƒã‚¯
if ! grep -r "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9" dist/assets/supabase*.js; then
    echo "âŒ ANON KEYãŒåŸ‹ã‚è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“"
    exit 1
fi

echo "âœ… å…¨ã¦ã®ãƒã‚§ãƒƒã‚¯ã«åˆæ ¼"
```

### CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

#### .github/workflows/deploy-check.yml
```yaml
name: Deploy Check

on:
  push:
    branches: [main]
  pull_request:

jobs:
  build-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3

      - name: Install
        run: npm ci

      - name: Build without env
        run: npm run build
        env:
          VITE_SUPABASE_URL: ''
          VITE_SUPABASE_ANON_KEY: ''

      - name: Check build output
        run: |
          if grep -r "=void 0" dist/assets/supabase*.js; then
            echo "âŒ Build failed"
            exit 1
          fi
```

---

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶

### Row Level Security (RLS)

#### å…¬é–‹ãƒ‡ãƒ¼ã‚¿ï¼ˆåŒ¿åã‚¢ã‚¯ã‚»ã‚¹å¯ï¼‰

```sql
-- plans ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE POLICY "Anyone can view published plans"
ON plans FOR SELECT
USING (status = 'published');

-- rules ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE POLICY "Anyone can view active rules"
ON rules FOR SELECT
USING (status = 'active');

-- faqs ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE POLICY "Anyone can view published faqs"
ON faqs FOR SELECT
USING (status = 'published');
```

#### èªè¨¼ãƒ‡ãƒ¼ã‚¿ï¼ˆèªè¨¼å¿…é ˆï¼‰

```sql
-- user_profiles ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE POLICY "Users can view own profile"
ON user_profiles FOR SELECT
USING (auth.uid() = id);

-- login_history ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE POLICY "Users can view own login history"
ON login_history FOR SELECT
USING (auth.uid() = user_id);
```

### CORSè¨­å®š
- è¨±å¯ã‚ªãƒªã‚¸ãƒ³: `https://lifex-btob.vercel.app`
- è¨±å¯ãƒ¡ã‚½ãƒƒãƒ‰: GET, POST, PUT, DELETE
- è¨±å¯ãƒ˜ãƒƒãƒ€ãƒ¼: Content-Type, Authorization

---

## ãƒ†ã‚¹ãƒˆè¦ä»¶

### å˜ä½“ãƒ†ã‚¹ãƒˆ

#### å¿…é ˆãƒ†ã‚¹ãƒˆé …ç›®

1. **ç’°å¢ƒå¤‰æ•°ãƒ†ã‚¹ãƒˆ**
   ```javascript
   describe('Environment Variables', () => {
       it('should work without env vars', () => {
           delete process.env.VITE_SUPABASE_ANON_KEY;
           const client = require('./supabase-client');
           expect(client.supabase).toBeDefined();
       });
   });
   ```

2. **ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ†ã‚¹ãƒˆ**
   ```javascript
   describe('Data Fetching', () => {
       it('should fetch plans', async () => {
           const plans = await supabaseAPI.plans.getAll();
           expect(plans.length).toBeGreaterThan(0);
       });
   });
   ```

### çµåˆãƒ†ã‚¹ãƒˆ

#### å…¨ãƒšãƒ¼ã‚¸å‹•ä½œç¢ºèª

| ãƒšãƒ¼ã‚¸ | ãƒ†ã‚¹ãƒˆå†…å®¹ | åˆæ ¼åŸºæº– |
|-------|----------|---------|
| plans.html | ãƒ—ãƒ©ãƒ³ä¸€è¦§è¡¨ç¤º | 57ä»¶è¡¨ç¤º |
| rules.html | ãƒ«ãƒ¼ãƒ«ä¸€è¦§è¡¨ç¤º | 2ä»¶è¡¨ç¤º |
| faq.html | FAQè¡¨ç¤º | 1ä»¶è¡¨ç¤º |
| admin-plans.html | ãƒ—ãƒ©ãƒ³ç·¨é›† | ä¿å­˜æˆåŠŸ |
| admin-faq.html | FAQç·¨é›† | ä¿å­˜æˆåŠŸ |

### E2Eãƒ†ã‚¹ãƒˆ

#### Playwrightè¨­å®š

```javascript
// playwright.config.js
export default {
    testDir: './tests',
    use: {
        baseURL: 'http://localhost:5173',
    },
    projects: [
        { name: 'chromium', use: { ...devices['Desktop Chrome'] } },
        { name: 'Mobile Safari', use: { ...devices['iPhone 12'] } },
    ],
};
```

#### ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª

```javascript
// tests/faq.spec.js
test('FAQ page displays data', async ({ page }) => {
    await page.goto('/faq.html');
    await expect(page.locator('.faq-item')).toHaveCount(1);
});
```

---

## é‹ç”¨è¦ä»¶

### ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

#### Vercel Analytics
- ãƒšãƒ¼ã‚¸ãƒ“ãƒ¥ãƒ¼è¿½è·¡
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š
- ã‚¨ãƒ©ãƒ¼ç›£è¦–

#### Supabase Dashboard
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½¿ç”¨é‡
- APIå‘¼ã³å‡ºã—æ•°
- ã‚¯ã‚¨ãƒªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—: æ¯æ—¥
- ä¿æŒæœŸé–“: 30æ—¥
- æ‰‹å‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—: é‡è¦ãªå¤‰æ›´å‰

#### ã‚³ãƒ¼ãƒ‰
- Git ãƒªãƒã‚¸ãƒˆãƒª: GitHub
- ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—é »åº¦: ã‚³ãƒŸãƒƒãƒˆæ¯
- ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥: mainï¼ˆæœ¬ç•ªï¼‰ã€developï¼ˆé–‹ç™ºï¼‰

### éšœå®³å¯¾å¿œ

#### ãƒ¬ãƒ™ãƒ«1: ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œãªã„
1. ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã‚¨ãƒ©ãƒ¼ç¢ºèª
2. Supabaseæ¥ç¶šç¢ºèª
3. Vercelç’°å¢ƒå¤‰æ•°ç¢ºèª
4. RLSãƒãƒªã‚·ãƒ¼ç¢ºèª

#### ãƒ¬ãƒ™ãƒ«2: ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼
1. `npm run build`å®Ÿè¡Œ
2. ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç¢ºèª
3. ä¾å­˜é–¢ä¿‚ç¢ºèªï¼ˆ`npm install`ï¼‰
4. ç’°å¢ƒå¤‰æ•°ç¢ºèª

#### ãƒ¬ãƒ™ãƒ«3: ãƒ‡ãƒ—ãƒ­ã‚¤å¤±æ•—
1. Vercel Logsã‚’ç¢ºèª
2. GitHub Actionsã®çµæœç¢ºèª
3. ãƒ“ãƒ«ãƒ‰è¨­å®šç¢ºèª
4. ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

---

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã€é‡è¦ã€‘ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºå•é¡Œã®å®Œå…¨ã‚¬ã‚¤ãƒ‰ï¼ˆ2025-01-23 è§£æ±ºæ¸ˆã¿ï¼‰

ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã«ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œãªã„å ´åˆã€ä»¥ä¸‹ã®4ã¤ã®åŸå› ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

#### åŸå› 1: Vercelç’°å¢ƒå¤‰æ•°ã®æœªè¨­å®š

**ç—‡çŠ¶**:
- ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã«ä½•ã‚‚è¡¨ç¤ºã•ã‚Œãªã„
- ãƒ­ãƒ¼ã‚«ãƒ«ã§ã¯å‹•ä½œã™ã‚‹

**åŸå› **:
```javascript
// supabase-client.js
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY; // undefined
if (!supabaseAnonKey) {
    throw new Error('Supabase API key is not configured'); // ã‚¨ãƒ©ãƒ¼
}
```

**è§£æ±ºç­–**:
```javascript
// ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤ã‚’è¿½åŠ 
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY ||
    'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'; // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
```

**æ•™è¨“**:
- å…¬é–‹ã‚­ãƒ¼ï¼ˆANON_KEYï¼‰ã¯ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤ã‚’è¨­å®šã™ã‚‹
- ç§˜å¯†ã‚­ãƒ¼ï¼ˆSERVICE_ROLE_KEYï¼‰ã¯ã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ã‚‹

---

#### åŸå› 2: JSãƒ•ã‚¡ã‚¤ãƒ«ã®404ã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**:
```
Failed to load resource: /js/supabase-client.js (404)
```

**åŸå› **:
- HTMLãŒ `/js/supabase-client.js` ã‚’å‚ç…§
- `public/js/` ãƒ•ã‚©ãƒ«ãƒ€ã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„
- `src/js/` ã«ã—ã‹å­˜åœ¨ã—ãªã„

**è§£æ±ºç­–**:
```bash
# å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ public/js/ ã«ã‚³ãƒ”ãƒ¼
cp src/js/supabase-client.js public/js/
cp src/js/supabase-api.js public/js/
cp src/js/supabase-integration.js public/js/
```

**æ•™è¨“**:
- `public/` ãƒ•ã‚©ãƒ«ãƒ€ã®å†…å®¹ã¯ãã®ã¾ã¾ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹
- Viteã§ãƒ“ãƒ«ãƒ‰ã•ã‚Œãªã„ãƒ•ã‚¡ã‚¤ãƒ«ã¯æ‰‹å‹•ã§ã‚³ãƒ”ãƒ¼

---

#### åŸå› 3: npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ–ãƒ©ã‚¦ã‚¶ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

**ç—‡çŠ¶**:
```
Failed to resolve module specifier "@supabase/supabase-js"
```

**åŸå› **:
```javascript
// âŒ ãƒ–ãƒ©ã‚¦ã‚¶ã¯npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç›´æ¥ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§ããªã„
import { createClient } from '@supabase/supabase-js';
```

**è§£æ±ºç­–**:
```html
<!-- âœ… CDNç‰ˆã‚’ä½¿ç”¨ -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
```

**æ•™è¨“**:
- ãƒ–ãƒ©ã‚¦ã‚¶ç’°å¢ƒã¨Node.jsç’°å¢ƒã‚’åŒºåˆ¥ã™ã‚‹
- ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯CDNã¾ãŸã¯ãƒãƒ³ãƒ‰ãƒ«ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨

---

#### åŸå› 4: SupabaseåˆæœŸåŒ–ã®ç«¶åˆï¼ˆæœ€é‡è¦ï¼‰

**ç—‡çŠ¶**:
```
âŒ Supabase CDN failed to load
âš ï¸ Supabase API not available
```

**åŸå› **:
```javascript
// common.js ã®å‡¦ç†
window.supabase = supabase.createClient(URL, KEY); // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’è¨­å®š

// å„HTMLãƒšãƒ¼ã‚¸ã®å‡¦ç†
if (window.supabase.createClient) {  // âŒ createClientã¯å­˜åœ¨ã—ãªã„
    const { createClient } = window.supabase;  // ã‚¨ãƒ©ãƒ¼
}
```

**å•é¡Œã®æœ¬è³ª**:
- `common.js` ã¯ `window.supabase` ã«**ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ**ã‚’è¨­å®š
- å„HTMLãƒšãƒ¼ã‚¸ã¯ `window.supabase` ã‚’**ãƒ©ã‚¤ãƒ–ãƒ©ãƒª**ã ã¨èª¤èª
- `window.supabase.createClient` ã¯å­˜åœ¨ã—ãªã„ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒ¡ã‚½ãƒƒãƒ‰ã§ã¯ãªã„ï¼‰

**è§£æ±ºç­–**:
```javascript
// âœ… ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯
if (typeof window.supabase !== 'undefined' && window.supabase.from) {
    const client = window.supabase; // ç›´æ¥ä½¿ç”¨

    window.supabaseAPI = {
        plans: {
            async getAll() {
                return await client.from('plans').select('*');
            }
        }
    };
}
```

**æ•™è¨“**:
- ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã®åˆæœŸåŒ–ã¯1ç®‡æ‰€ã§è¡Œã†
- åˆæœŸåŒ–æ¸ˆã¿ã‹ã©ã†ã‹ã‚’é©åˆ‡ã«ãƒã‚§ãƒƒã‚¯ã™ã‚‹
- ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’åŒºåˆ¥ã™ã‚‹

---

### ãƒ‡ãƒãƒƒã‚°æ‰‹é †ï¼ˆãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œãªã„å ´åˆï¼‰

#### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç¢ºèª
```bash
node scripts/utilities/diagnose-data-display.js
```

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
```
âœ… ãƒ‡ãƒ¼ã‚¿ã¯å­˜åœ¨ã—ã¾ã™
   Plans: 57ä»¶
   Rules: 2ä»¶
   FAQs: 2ä»¶
```

#### ã‚¹ãƒ†ãƒƒãƒ—2: RLSç¢ºèª
```bash
node scripts/utilities/test-anon-access.js
```

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
```
âœ… ANON KEYã§ãƒ‡ãƒ¼ã‚¿å–å¾—æˆåŠŸï¼
```

#### ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç¢ºèª

**æ­£å¸¸ãªå ´åˆã®ãƒ­ã‚°**:
```
âœ… Supabase initialized in common.js
âœ… Supabase API initialized for rules
âœ… Loaded categories: 5
âœ… Loaded rules: 2
```

**ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚‹å ´åˆ**:
```
âŒ Supabase CDN failed to load
âš ï¸ Supabase API not available
```

#### ã‚¹ãƒ†ãƒƒãƒ—4: Network ã‚¿ãƒ–ç¢ºèª

F12 â†’ Network ã‚¿ãƒ– â†’ ãƒªãƒ­ãƒ¼ãƒ‰

**ç¢ºèªé …ç›®**:
- `/js/common.js` â†’ 200 OK
- `/js/supabase-*.js` â†’ 200 OK
- CDN (`cdn.jsdelivr.net`) â†’ 200 OK

#### ã‚¹ãƒ†ãƒƒãƒ—5: Vercelãƒ‡ãƒ—ãƒ­ã‚¤ç¢ºèª

https://vercel.com/dashboard â†’ Deployments

**ç¢ºèªé …ç›®**:
- æœ€æ–°ã‚³ãƒŸãƒƒãƒˆãŒãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¦ã„ã‚‹ã‹
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒã€ŒReadyã€ã‹
- ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ãŒãªã„ã‹

---

### ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨è§£æ±ºæ–¹æ³•

| ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ | åŸå›  | è§£æ±ºæ–¹æ³• |
|----------------|------|---------|
| `Failed to resolve module specifier` | npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆ | CDNç‰ˆã‚’ä½¿ç”¨ |
| `Supabase CDN failed to load` | åˆæœŸåŒ–ã®ç«¶åˆ | `window.supabase.from` ã‚’ãƒã‚§ãƒƒã‚¯ |
| `window.supabaseAPI is undefined` | åˆæœŸåŒ–ã‚¿ã‚¤ãƒŸãƒ³ã‚° | å¾…æ©Ÿãƒ«ãƒ¼ãƒ—ã‚’è¿½åŠ  |
| `ANON_KEY is not configured` | ç’°å¢ƒå¤‰æ•°æœªè¨­å®š | ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤ã‚’è¿½åŠ  |
| `404: /js/supabase-client.js` | ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„ | `public/js/` ã«ã‚³ãƒ”ãƒ¼ |

---

### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ: ãƒ‡ãƒ—ãƒ­ã‚¤å‰ã®ç¢ºèª

- [ ] `public/js/` ã«å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹
- [ ] Supabase CDN ãŒHTMLã«å«ã¾ã‚Œã¦ã„ã‚‹
- [ ] åˆæœŸåŒ–ãƒ­ã‚¸ãƒƒã‚¯ãŒé‡è¤‡ã—ã¦ã„ãªã„
- [ ] ç’°å¢ƒå¤‰æ•°ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤ãŒã‚ã‚‹ï¼ˆå…¬é–‹ã‚­ãƒ¼ã®ã¿ï¼‰
- [ ] ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã™ã‚‹ (`npm run build`)
- [ ] ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã‚¨ãƒ©ãƒ¼ãŒãªã„

---

## ä»˜éŒ²

### A. ç”¨èªé›†

| ç”¨èª | èª¬æ˜ |
|-----|------|
| ANON KEY | Supabaseã®å…¬é–‹APIã‚­ãƒ¼ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§ä½¿ç”¨å¯ |
| SERVICE ROLE KEY | Supabaseã®ç®¡ç†è€…ã‚­ãƒ¼ã€ã‚µãƒ¼ãƒãƒ¼å´å°‚ç”¨ |
| RLS | Row Level Securityã€è¡Œãƒ¬ãƒ™ãƒ«ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ |
| Vercel Functions | Vercelã®ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹é–¢æ•°æ©Ÿèƒ½ |

### B. å‚è€ƒãƒªãƒ³ã‚¯

- [Supabaseå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://supabase.com/docs)
- [Viteå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://vitejs.dev)
- [Vercelå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://vercel.com/docs)
- [Alpine.jså…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://alpinejs.dev)

### C. æ›´æ–°å±¥æ­´

| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æ—¥ä»˜ | æ›´æ–°å†…å®¹ |
|----------|------|---------|
| 2.1 | 2025-01-23 | ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ï¼ˆãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºå•é¡Œã®å®Œå…¨ã‚¬ã‚¤ãƒ‰ï¼‰ |
| 2.0 | 2025-01-23 | ç’°å¢ƒå¤‰æ•°ç®¡ç†ã€ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè¦ä»¶ã‚’å¤§å¹…ã«è¿½åŠ  |
| 1.0 | 2025-01-20 | åˆç‰ˆä½œæˆ |

---

**æ–‡æ›¸ç®¡ç†**:
- æ‰¿èªè€…: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
- ãƒ¬ãƒ“ãƒ¥ãƒ¼å‘¨æœŸ: æœˆæ¬¡
- æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼: 2025-02-23
